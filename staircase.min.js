!function(){window.$scv="5.2.5",window.$scb="135b",window.Cookies={get:function(t){for(var e=document.cookie.split(";"),i=0;i<e.length;i++)if(e[i].split("=")[0]==t)return e[i].substr(t.length+1);return null},set:function(t,e,i){if(void 0!==i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3)}return document.cookie=t+"="+e+(i?"; expires="+a.toGMTString():"")+"; path=/",window.Cookies},remove:function(t){return window.Cookies.set(t,null,-1)}},String.prototype.trim=function(t){var e,i=this,a=0,r=0;for(i+="",t?(t+="",e=t.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1")):e=" \n\r	\f\x0B            ​\u2028\u2029　",a=i.length,r=0;a>r;r++)if(-1===e.indexOf(i.charAt(r))){i=i.substring(r);break}for(a=i.length,r=a-1;r>=0;r--)if(-1===e.indexOf(i.charAt(r))){i=i.substring(0,r+1);break}return-1===e.indexOf(i.charAt(0))?i:""},String.prototype.hash=function(t){var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<>!:;,.$";t=t?t:8;for(var a=0;t>a;a++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},Number.prototype.toDate=function(t){var e,i,a="Sun Mon Tues Wednes Thurs Fri Satur January February March April May June July August September October November December".split(" "),r=/\\?(.?)/gi,n=function(t,e){return i[t]?i[t]():e},o=function(t,e){for(t=String(t);t.length<e;)t="0"+t;return t};return i={d:function(){return o(i.j(),2)},D:function(){return i.l().slice(0,3)},j:function(){return e.getDate()},l:function(){return a[i.w()]+"day"},N:function(){return i.w()||7},S:function(){var t=i.j(),e=t%10;return 3>=e&&1==parseInt(t%100/10,10)&&(e=0),["st","nd","rd"][e-1]||"th"},w:function(){return e.getDay()},z:function(){var t=new Date(i.Y(),i.n()-1,i.j()),e=new Date(i.Y(),0,1);return Math.round((t-e)/864e5)},W:function(){var t=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),e=new Date(t.getFullYear(),0,4);return o(1+Math.round((t-e)/864e5/7),2)},F:function(){return a[6+i.n()]},m:function(){return o(i.n(),2)},M:function(){return i.F().slice(0,3)},n:function(){return e.getMonth()+1},t:function(){return new Date(i.Y(),i.n(),0).getDate()},L:function(){var t=i.Y();return 0===t%4&0!==t%100|0===t%400},o:function(){var t=i.n(),e=i.W();return i.Y()+(12===t&&9>e?1:1===t&&e>9?-1:0)},Y:function(){return e.getFullYear()},y:function(){return i.Y().toString().slice(-2)},a:function(){return 11<e.getHours()?"pm":"am"},A:function(){return i.a().toUpperCase()},B:function(){var t=3600*e.getUTCHours(),i=60*e.getUTCMinutes(),a=e.getUTCSeconds();return o(Math.floor((t+i+a+3600)/86.4)%1e3,3)},g:function(){return i.G()%12||12},G:function(){return e.getHours()},h:function(){return o(i.g(),2)},H:function(){return o(i.G(),2)},i:function(){return o(e.getMinutes(),2)},s:function(){return o(e.getSeconds(),2)},u:function(){return o(1e3*e.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var t=new Date(i.Y(),0),e=Date.UTC(i.Y(),0),a=new Date(i.Y(),6),r=Date.UTC(i.Y(),6);return t-e!==a-r?1:0},O:function(){var t=e.getTimezoneOffset(),i=Math.abs(t);return(t>0?"-":"+")+o(100*Math.floor(i/60)+i%60,4)},P:function(){var t=i.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-e.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(r,n)},r:function(){return"D, d M Y H:i:s O".replace(r,n)},U:function(){return e/1e3|0}},function(t,i){return e=void 0===i?new Date:i instanceof Date?new Date(i):new Date(1e3*i),t.replace(r,n)}(t,this)};try{window.location.param=function(t,e){if(!e)var e=window.location.search;var i=RegExp("[?&](?:amp;)?"+t.replace(/(\[|\]|\{|\}|\?|\/|\\|\||\(|\))/g,"\\$1")+"=([^&]*)").exec(e);return i&&decodeURIComponent(i[1].replace(/\+/g," "))},Object.defineProperty(window.location,"params",{set:function(){},get:function(){var t={},e=window.location.search.substr(1).split("&");if(e)for(var i in e)e[i]=e[i].replace(/^(?:amp;)?([^=]+)=(.*)?$/,"$1\n$2").split("\n"),t[e[i][0]]?(t[e[i][0]]=[t[e[i][0]]],t[e[i][0]].push(e[i][1])):t[e[i][0]]=e[i][1];return t}})}catch(t){window.console&&console.error("Your browser does not support changes to window.location.",t)}if(window.jQuery.fn.staircase=function(t){var e=window.jQuery;if(1==e(this).length){var i=e(this).data("staircase");return i||e(this).data("staircase",i=new Staircase(this,t?t:{})),i}return e(this).each(function(){e(this).data("staircase")||e(this).data("staircase",new Staircase(this,t?t:{}))})},window.jQuery("input[staircase-value]").each(function(){var t=window.jQuery,e=t(this).attr("staircase-value").replace(/#{(.*?)}/g,function(t,e){if(e.match(/^date\.(.*)$/i))return(new Date/1e3).toDate(e.replace(/^date\.(.*)$/i,"$1"));if(e.match(/^cookies?\.(.*)$/i)){var i=e.replace(/^cookies?\.(.*)$/i,"$1"),a=document.cookie.split("; ");for(var r in a)if(a[r].split("=")[0]==i)return a[r].substr(i.length+1);return""}var n=window;e=e.split(".");for(var r in e){if(!n[e[r]])return;n=n[e[r]]}return n!=window?n:void 0});t(this).removeAttr("staircase-value").val(e)}),!document.title||document.title.match(/\.(html?|php)((\?|#)(.*?)?)?$/i)||0==$("title").length){var e=($("h1, h2, h3, h4, h5, h6").first().text()||"").trim();if(e||(e=($("img[alt]").first().attr("alt")||"").trim()),e||(e=($("p").first().text().trim()||"").split(" ").slice(0,4).join(" ").trim()),!e&&window.location.href.match(/\.(html?|php)((\?|#)(.*?)?)?$/i)){e=window.location.href.replace(/(.*)\/(.*?)\.(html?|php)((\?|#)(.*?)?)?$/i,"$2").replace(/[-_\.]/g," ").split(" ");for(var i in e)e[i]=e[i][0].toUpperCase()+e[i].substr(1).toLowerCase();e=e.join(" ")}document.title=e}window.Data8API=function(t,e){var i=this,a=!1;i.APIKey=t,i.License=e,i.Cache={},i.DefaultCountry="GB",i.Verify=function(t,e,a){if(!a&&e&&"function"==typeof e&&(a=e,e="email"),!a||"function"!=typeof a)return i;if(i.Cache[e]&&i.Cache[e][t]){if("object"!=typeof i.Cache[e][t])return i;if(!i.Cache[e][t].TimedOut)return a.call(i,i.Cache[e][t],!0),i}var r=function(r,o){i.Cache[e][t]=r,i.Cache[e][t].RequestDuration=(1*new Date-n)/1e3,i.Cache[e][t].IsValid=o,a.call(i,i.Cache[e][t],!1)},n=1*new Date,o=setTimeout(function(){i.Cache[e][t]={IsValid:!0,RequestDuration:(1*new Date-n)/1e3,TimedOut:!0},r(i.Cache[e][t],i.Cache[e][t].IsValid)},5e3);switch(i.Cache[e]||(i.Cache[e]={}),i.Cache[e][t]="loading",String(e).trim().toLowerCase()){case"email":var s=new data8.emailvalidation;s.isvalid(t,"Address",null,function(t){clearTimeout(o),r(t,!!t.Result.trim().match(/^(catchall|error|greylisted|inconclusive|valid)$/i))});break;case"mobile":case"landline":case"telephone":case"phone":t=t.replace(/[^0-9\+]/g,"");var s=new data8.internationaltelephonevalidation;s.isvalid(t,i.DefaultCountry,[new data8.option("UseMobileValidation","true"),new data8.option("UseLineValidation","true")],function(t){clearTimeout(o),r(t,!!t.Result.ValidationResult.trim().match(/^(nocoverage|valid)$/i))});break;default:clearTimeout(o),i.Cache[e][t]=void 0}return i},i.Lookup=function(t,e){if(!e||"function"!=typeof e)return i;var a=t.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();if(i.Cache.Addresses&&i.Cache.Addresses[a]){if("object"!=typeof i.Cache.Addresses[a])return i;if(!i.Cache.Addresses[a].TimedOut)return e.call(i,i.Cache.Addresses[a],t,!0),i}var r=function(r,o){i.Cache.Addresses[a]=r,i.Cache.Addresses[a].RequestDuration=(1*new Date-n)/1e3,i.Cache.Addresses[a].IsValid=o,e.call(i,i.Cache.Addresses[a],t,!1)},n=1*new Date,o=setTimeout(function(){i.Cache.Addresses[a]={IsValid:!0,RequestDuration:(1*new Date-n)/1e3,TimedOut:!0},r(i.Cache.Addresses[a],i.Cache.Addresses[a].IsValid)},5e3);i.Cache.Addresses||(i.Cache.Addresses={}),i.Cache.Addresses[a]="loading";var s=new data8.addresscapture;return s.getfulladdress(i.License,t,"",[new data8.option("MaxLines","5"),new data8.option("FixTownCounty","true")],function(t){clearTimeout(o),r(t,!!(t.Results.length>0))}),i},i.Authenticate=function(t){if(!t||"function"!=typeof t)return i;var e=function(){window.data8&&window.data8.addresscapture&&window.data8.emailvalidation&&window.data8.internationaltelephonevalidation?t.call(i):setTimeout(e,50)};if(a||$('script[src*="data-8.co.uk"]').lenght>0)return e(),i;a=!0;var r=$(document.createElement("script")).appendTo("head")[0];return r.onload=function(){data8.load("AddressCapture"),data8.load("EmailValidation"),data8.load("InternationalTelephoneValidation"),e()},r.src="http://webservices.data-8.co.uk/javascript/loader.ashx?key="+i.APIKey,i}},window.BriteVerify=function(t){var e=this;return e.APIKey=t,e.Cache={},e.Verify=function(t,i,a){if(t&&"string"==typeof t&&i&&"function"==typeof i){if(e.Cache[t]){if("object"!=typeof e.Cache[t])return e;if(!e.Cache[t].TimedOut)return i.call(e,e.Cache[t],!0),e}e.Cache[t]="loading";var r=function(r){r&&"object"==typeof r&&!r.errors?(e.Cache[t]=r,i.call(e,r,!1)):a&&"function"==typeof a&&(e.Cache[t]=null,a.call(e,r))},n=1*new Date,o=setTimeout(function(){e.Cache[t]={status:"timeout",RequestDuration:(1*new Date-n)/1e3,TimedOut:!0},r(e.Cache[t])},5e3);$.ajax({data:{address:t,apikey:e.APIKey},dataType:"json",success:function(t){clearTimeout(o),t.RequestDuration=(1*new Date-n)/1e3,r(t)},type:"get",url:"http://beta.staircase.tech/api/ext/bv"})}return e},e},window.Staircases={},window.Staircase=function(t,e){var i=window.jQuery,a=i(t),r={},n=this,o=0,s={checkboxGroups:!1,history:!1,ID:"".hash(8),notifyDelay:3,steps:".step",stepBlur:null,stepFocus:null,validate:null,APIs:{briteverify:{APIKey:null,fields:'[validate="email"]',markInput:!1,scoreFieldName:null,scoreFieldSuffix:"_bvscore",logging:!1},data8:{APIKey:null,logging:!1}}},c=function(t){return t},u=function(t,e){for(var i in e)t[i]&&"object"==typeof t[i]&&"object"==typeof e[i]?t[i]=u(t[i],e[i]):t[i]=e[i];return t};e&&"object"==typeof e&&(s=u(s,e)),n.log=function(t,e){return i.ajax({type:"post",url:"http://beta.staircase.tech/api/log",data:{data:t,info:{screen:{width:screen.width||0,height:screen.height||0},window:{width:i(window).width()||0,height:i(window).height()||0,x:window.screenLeft||window.screenX||0,y:window.screenTop||window.screenY||0},document:{title:document.title}},origin:window.location.href,type:e||"unknown",scver:window.$scv+" "+window.$scb}}),n},n.scroll=function(t,e){if(t=i(t),e=i(e?e:document.body),0==t.length||0==e.length)return n;if(jQuery.fn.scrollTo)e.scrollTo(t,500);else if(t[0].scrollIntoView){try{t[0].scrollIntoView({behavior:"smooth",block:"start"})}catch(a){t[0].scrollIntoView()}e[0].scrollTop-=20}else{var r=t.offset();r&&e.scrollTop(r.top-20)}return n},n.on=function(t,e){if(t.trim().indexOf(" ")>-1){t=t.trim().split(" ");for(var i in t)n.on(t[i],e);return n}return t=t.trim(),r[t]||(r[t]=[]),r[t].push(e),n},n.off=function(t,e){if(t.trim().indexOf(" ")>-1){t=t.trim().split(" ");for(var i in t)n.off(t[i],e);return n}if(t=t.trim(),r[t]&&r[t].length>0){if($newevents=[],e!==undeefined)for(var i in r[t])r[t][i]!=e&&$newevents.push(r[t][i]);r[t]=$newevents}return n},n.trigger=function(t,e){try{if(t.trim().indexOf(" ")>-1){t=t.trim().split(" ");for(var i in t)n.trigger(t[i],e);return n}if(t=t.trim(),r[t]&&r[t].length>0)for(var i in r[t])if(r[t][i].apply(n,e?e:[])===!1)return!1}catch(a){window.console&&console.error(a)}return n},n.Patterns={currency:/^(-)?([^a-zA-Z0-9 ])?([0-9\,]+)(\.([0-9]{2,}))?$/,date:[/^([0-9]{1,2})(\/|-|\.|,| )([0-9]{1,2})(\/|-|\.|,| )([0-9]{2,4})$/,/^((mon|monday|tue|tues|tuesday|wed|wednesday|thu|thurs|thursday|fri|friday|sat|saturday|sun|sunday)([\s]+))?([0-9]{1,2})(st|nd|rd|th)?([\s]+)?(jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|sept|september|oct|october|nov|november|dec|december)([\s]+)?([0-9]{2,4})$/i,/^([0-9]{2})$/,/^(1|2)([0-9]{3})$/],datepicker:/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,"default":/^(?!\s*$).+/,email:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,filename:/^(([^\/\\\?%\*:|"<>]+)?\.([^\/\\\?%\*:|"<>\.]+)|([^\/\\\?%\*:|"<>\.]+))$/,name:/^([ A-Za-z\.\-']+)$/,number:[/^-?([0-9]+)$/,/^-?([0-9]+)\.([0-9]+)$/,/^([0-9]+)$/,/^([0-9]+)\.([0-9]+)$/,/^-?([0-9]+)(\.([0-9]+))?$/],phone:[function(){return this.replace(/\s/g,"").match(/^0(?!.*(\d)\1{9,})\d{9,}$/)},function(){return this.replace(/\s/g,"").match(/^07(?!.*(\d)\1{9,})\d{9,}$/)},function(){return this.replace(/\s/g,"").match(/^0(?!.*(\d)\1{9,})\d{9,}$/)},/^0(?!.*(\d)\1{9,})\d{9,}$/,/^07(?!.*(\d)\1{9,})\d{9,}$/,/^0(?!.*(\d)\1{9,})\d{9,}$/],postcode:/^(([gG][iI][rR] {0,}0[aA]{2})|((([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y]?[0-9][0-9]?)|(([a-pr-uwyzA-PR-UWYZ][0-9][a-hjkstuwA-HJKSTUW])|([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y][0-9][abehmnprv-yABEHMNPRV-Y]))) {0,}[0-9][abd-hjlnp-uw-zABD-HJLNP-UW-Z]{2}))$/,time:/^([0-9]{1,2}):([0-9]{2})(:([0-9]{2}))?([\s]+)?(am|pm)?$/i,zipcode:/^(^\d{5}$)|(^\d{5}-\d{4}$)$/},n.Patterns.mobile=n.Patterns.phone[1],n.Patterns.landline=n.Patterns.telephone=n.Patterns.phone,n.Constraints={letters:/^([^0-9])$/,numbers:/^([^a-zA-Z])$/,symbols:/^([^0-9a-zA-Z])$/},n.$object=a,n.$current=0,n.Steps=[],i(window).on("hashchange popstate",function(){var t=/^#!\/([A-Z0-9<>\!\:\;\,\.\$]{8})\/([0-9]+)$/i;if(window.location.hash.match(/^#!?\/?$/))for(var e in window.Staircases){if(window.Staircases[e].trigger("hashchange popstate",[window.Staircases[n.$current],window.location.hash])===!1)return!1;window.Staircases[e].Steps[0].Focus()}else if(window.location.hash.match(t)){var a=window.location.hash.replace(t,"$1"),r=parseInt(window.location.hash.replace(t,"$2"));if(window.Staircases[a]&&window.Staircases[a].Steps[r]&&window.Staircases[a].Steps[r].Visited){if(window.Staircases[a].trigger("hashchange popstate",[a,r])===!1)return!1;window.Staircases[a].Steps[r].Focus()}}i(window).scrollTop(o)}),n.Extend=function(t,e){return n.Patterns[t]=e,n},n.Validate=function(t,e){if(!t)return!1;if(t=i(t),e||(e=t.attr("validate")),e){if(n.trigger("beforevalidate",[t])===!1)return!1;if(("select"==e||"selected"==e)&&t.is("select")){var a=t.val(),r=t.find("option").first(),o=void 0===r.attr("value")?r.html():r.attr("value");if("object"==typeof a)for(var c in a)if(a[c]==o)return!1;return a==o?n.trigger("aftervalidate validate",[t,!1])===!0:n.trigger("aftervalidate validate",[t,!0])!==!1}if(!("checked"!=e&&"unchecked"!=e||"checkbox"!=t.attr("type")&&"radio"!=t.attr("type"))){var u=!("checked"==e&&!t.is(":checked")||"unchecked"==e&&t.is(":checked")),l=n.trigger("aftervalidate validate",[t,u]);return l===!0||l===!1?l:u}var d=n.Patterns,f=e.indexOf("[")>-1?e.replace(/\[([0-9]+)\]/g,"\n$1").split("\n"):[e];if(d){if(f.length>1)for(var c=0;c<f.length&&d[f[c]];c++)d=d[f[c]];else d="object"!=typeof d[f[0]]||d[f[0]]instanceof RegExp?d[f[0]]:d[f[0]][0];if(d&&(d instanceof RegExp||"function"==typeof d)){var u=!1;d instanceof RegExp?u=!!t[0].value.match(d):"function"==typeof d&&(u=!!d.call(t[0].value));var l=n.trigger("aftervalidate validate",[t,u]);return l===!0||l===!1?l:u}}}if(s.validate&&"function"==typeof s.validate){var u=!!s.validate.call(t[0],n);return n.trigger("aftervalidate validate",[t,u]),u}return!1},n.To=function(t){return n.trigger("switch",[t]),t<n.$current?n.Steps[t].Focus():n.Steps[t]&&n.Steps[n.$current].Validate()&&n.Steps[t].Focus(),n},n.Next=function(){return n.trigger("switch next",[n.$current+1]),n.Steps[n.$current+1]&&n.Steps[n.$current].Validate()&&n.Steps[n.$current+1].Focus(),n},n.Prev=function(){return n.trigger("switch prev previous",[n.$current-1]),n.Steps[n.$current-1]&&n.Steps[n.$current-1].Focus(),n},n.AwaitSubmit=function(t){var e=function(){return i(".awaiting-validation",a).length>0?(setTimeout(e,100),!1):void t.removeAttr("disabled").click()};return e(),n};var l=function(){var t=i(arguments[0]),a=this,r=null;return $toconstrain='input:not([type="button"], [type="submit"], [type="image"])[constrain], textarea[constrain]',$allinputs='input:not([type="button"], [type="submit"], [type="image"])[name], select[name], textarea[name]',$inputs='input:not([type="button"], [type="submit"], [type="image"])[validate], select[validate], textarea[validate]',$buttons='input[type="button"].next, input[type="button"].continue, input[type="button"].submit, input[type="submit"], button',$backbuttons='input[type="button"].prev, input[type="submit"].prev, button.prev, input[type="button"].back, input[type="submit"].back, button.back',a.$index=arguments[1],a.$object=t,a.$rules=[],Object.defineProperty(t,"Visited",{get:function(){return r},set:function(){r=arguments[0]?arguments[0]:!0}}),a.Focus=function(e){for(var r in n.Steps)n.Steps[r].Blur(e);if(!t.is(":visible")){n.$current=a.$index,t.Visited||(t.Visited=new Date),e||t.trigger("focus"),t.show();var c="!/"+s.ID+"/"+a.$index;o=i(window).scrollTop(),a.$index>0&&window.location.hash!="#"+c?location.hash=c:0==a.$index&&(location.hash="!/"),n.trigger("stepfocus",[a])}return a},a.Blur=function(e){return t.is(":visible")&&(e||t.trigger("blur"),t.hide(),n.trigger("stepblur",[a])),a},a.Validate=function(e,r){if(!e){var o=!0;return t.find($inputs).each(function(){i(this).attr("optional")?i(this).val()&&!a.Validate(this)&&(o=!1):a.Validate(this)||(o=!1)}),o}if(e=i(e),n.trigger("beforestepvalidate",[a,e])===!1)return!1;var c=void 0!==r?!!r:e.attr("optional")?!e.val()||!!n.Validate(e):!!n.Validate(e),u=e.closest("label").length?e.closest("label"):e.attr("id")&&i('label[for="'+e.attr("id")+'"]').length?i('label[for="'+e.attr("id")+'"]'):!1,l=i(u?u.add(e):e);return l.removeClass("staircase-has-error staircase-highlight-error"),c?(l.data("notify-timeout")&&window.clearTimeout(l.data("notify-timeout")),n.trigger("stepvalidate",[a,!0]),!0):(l.addClass("staircase-has-error staircase-highlight-error"),l.data("notify-timeout",setTimeout(function(){l.removeClass("staircase-highlight-error")},s.notifyDelay>300?s.notifyDelay:1e3*s.notifyDelay)),n.trigger("stepvalidate",[a,!1]),!1)},a.Condition=function(e){if("function"!=typeof e&&"string"!=typeof e)return a;var r=["Staircase","Step","$"],o={};return t.find('input:not([type="button"], [type="submit"], [type="image"])[name], textarea[name], select[name]').each(function(){var t=i(this).attr("name");o[t]?(void 0===o[t].length&&(o[t]=[o[t]]),o[t].push(this)):(r.push(t),o[t]=this)}),n.trigger("addcondition",[a,a.$rules.push({callback:"function"==typeof e?e:new Function(r,e),inputs:o})-1]),a},t.on("keydown",$toconstrain,function(t){var e=i(this),a=e.attr("constrain");return a=n.Constraints[a]?n.Constraints[a]:null,a&&!String.fromCharCode(t.keyCode>=96&&t.keyCode<=105?t.keyCode-48:t.keyCode).match(a)?(n.trigger("constrained",[e,a]),!1):void 0}),t.on("focus blur keyup keydown change paint",$inputs,function(t){var e=i(this),a=e.closest("label");switch(a=0==a.length&&e.attr("name")?i('label[for="'+e.attr("name")+'"]'):a,a=a.length>0?a.add(e):e,t.type){case"focusin":a.addClass("focus");break;case"focusout":a.removeClass("focus");break;default:a[e.val().trim()?"removeClass":"addClass"]("empty")}}),i($inputs).trigger("paint"),t.on("change validate",$inputs,function(){var t=i(this),r=t.closest("label"),o=i(r?r.add(t):t);if(s.APIs.briteverify.APIKey&&t.filter(function(){var e=s.APIs.briteverify.fields,i=!1;"string"==typeof e&&(e=e.indexOf(",")>-1?e.split(", "):[e]),e.push("*[bv-score]");for(var a in e)e[a].trim()&&(i=i?!0:t.is(e[a].trim()));return i}).length&&n.Validate(t[0],"email")){if(n.trigger("beforebriteverify",[t])===!1)return!1;var c=t.attr("bv-score")?t.attr("bv-score"):s.APIs.briteverify.scoreFieldName?s.APIs.briteverify.scoreFieldName:t.attr("name")+(s.APIs.briteverify.scoreFieldSuffix||"_score"),u=i('input[name="'+c+'"]').length>0?i('input[name="'+c+'"]'):t.data("briteverify-scorefield");u||(u=i('<input type="hidden" tabindex="-1" name="'+c+'" />').insertAfter(t).on("focus",function(){t.focus()})),t.data("briteverify-scorefield",u),o.addClass("awaiting-validation"),n.BriteVerify||(n.BriteVerify=new BriteVerify(s.APIs.briteverify.APIKey)),n.BriteVerify.Verify(t[0].value,function(i,r){o.removeClass("awaiting-validation"),"object"==typeof i&&void 0!==i.status&&(s.APIs.briteverify.markInput&&("invalid"!=i.status.trim().toLowerCase()?(o.removeClass("staircase-has-error staircase-highlight-error"),a.Validate(t[0],!0)):(o.addClass("staircase-has-error staircase-highlight-error"),t.data("notify-timeout",setTimeout(function(){o.removeClass("staircase-highlight-error")},s.notifyDelay>300?s.notifyDelay:1e3*s.notifyDelay)),a.Validate(t[0],!1))),e.APIs.briteverify.logging&&!r&&n.log({response:i,input:t.val()},"briteverify"),n.trigger("briteverify",[t,i.status,i]),u.val(i.status))})}if((t.attr("d8")||t.attr("d8-lookup-street"))&&t[0].value&&s.APIs.data8&&s.APIs.data8.APIKey){if(t.attr("d8")){if(a.Validate(t[0])){if(o.addClass("awaiting-validation"),n.trigger("beforedata8",[t])===!1)return o.removeClass("awaiting-validation"),!1;n.Data8||(n.Data8=new Data8API(s.APIs.data8.APIKey,s.APIs.data8.License)),n.Data8.Authenticate(function(){n.Data8.Verify(t.val().trim(),t.attr("d8"),function(i,r){o.removeClass("awaiting-validation"),"object"==typeof i&&void 0!==i.IsValid&&(i.IsValid?(o.removeClass("staircase-has-error staircase-highlight-error"),a.Validate(t[0],!0)):(o.addClass("staircase-has-error staircase-highlight-error"),t.data("notify-timeout",setTimeout(function(){o.removeClass("staircase-highlight-error")},s.notifyDelay>300?s.notifyDelay:1e3*s.notifyDelay)),a.Validate(t[0],!1)),e.APIs.data8.logging&&!r&&n.log({response:i,input:t.val()},"data8"),n.trigger("data8",[t,i.IsValid,i]))})})}}else if(t.attr("d8-lookup-street")){var l=t.data("d8-postcode-validated-successfully");if(!l||l!=t.val().replace(/[^a-zA-Z0-9]/g,"").toUpperCase()){var d=i('*[name="'+t.attr("d8-lookup-street").toLowerCase().trim()+'"]'),f=t.attr("d8-lookup-city")||"";if(f&&(f=i('*[name="'+f.toLowerCase().trim()+'"]'),0==f.length&&(f=i('<input type="hidden" name="'+t.attr("d8-lookup-city")+'" />').insertAfter(d),n.trigger("data8lookupcityappended",[f]))),a.Validate(t[0])){if(o.addClass("awaiting-validation"),n.trigger("beforedata8lookup",[t,d])===!1)return o.removeClass("awaiting-validation"),!1;n.Data8||(n.Data8=new Data8API(s.APIs.data8.APIKey,s.APIs.data8.License)),n.Data8.Authenticate(function(){n.Data8.Lookup(t[0].value,function(r,s,c){if(o.removeClass("awaiting-validation"),"object"==typeof r&&void 0!==r.IsValid){if(s=s.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),!r.IsValid)return a.Validate(t[0],!1),!1;t.data("d8-postcode-validated-successfully",t.val().replace(/[^a-zA-Z0-9]/g,"").toUpperCase()),a.Validate(t[0],!0);var u=["class","id","name","style"];d.each(function(){var t=i(this),e=t;if(!t.data("current-postcode")||t.data("current-postcode")!=s){if(!t.is("select")){e=i('<select validate="selected"></select>').on("change",function(){if("N/A"==this.value)d.each(function(){var t=i(this).data("select-counterpart");i(this).insertAfter(t),t.remove()}).first().focus();else{var t=i(this).find('option[value="'+this.value+'"]');f&&f.val(t.attr("city"))}});for(var a in u)t.is("["+u[a]+"]")&&e.attr(u[a],t.attr(u[a]));e.insertAfter(t).data("original",t),t.data("select-counterpart",e).detach()}e.data("current-postcode",s).html('<option value="">Please Select Your Address...</option>');for(var a in r.Results){for(var n=[],o=[],c=0;c<r.Results[a].Address.Lines.length-1;c++){var l=r.Results[a].Address.Lines[c];l&&n.push(l),o.push(l)}n=n.join(", "),e.append('<option value="'+n+'" city="'+o[3]+'">'+n+"</option>")}e.append('<option value="N/A">My address is not listed here</option>')}}),e.APIs.data8.logging&&!c&&n.log({response:r,input:t.val()},"data8-address-lookup"),n.trigger("data8lookup",[t,d,address])}})})}}}}else a.Validate(t[0])}),t.on("click",$backbuttons,function(){return i(this).is($buttons)?void 0:n.trigger("back",[a,i(this)])===!1?!1:(a.$index>0&&n.Steps[a.$index-1].Focus(),!1)}),t.on("click",$buttons,function(){if(!i(this).is($backbuttons)){var e=!1;if(n.trigger("beforesubmit",[a,i(this)])===!1)return!1;if(t.find($inputs).trigger("validate"),s.checkboxGroups&&i("string"==typeof s.checkboxGroups?t.find(s.checkboxGroups):t.find(".checkbox-group").length>0?t.find(".checkbox-group"):t).each(function(){var t=i(this);t.find('input:not([type="button"], [type="submit"], [type="image"]), select, textbox').length==t.find('input[type="checkbox"]').length&&(0==t.find('input[type="checkbox"]:checked').length?(t.addClass("staircase-has-error staircase-highlight-error"),t.data("notify-timeout",setTimeout(function(){t.removeClass("staircase-highlight-error")},s.notifyDelay>300?s.notifyDelay:1e3*s.notifyDelay))):(t.removeClass("staircase-has-error staircase-highlight-error"),t.data("notify-timeout")&&window.clearTimeout(t.data("notify-timeout"))))}),t.is(".staircase-has-error, .awaiting-validation")||t.find(".staircase-has-error, .awaiting-validation").length>0){if(t.is(".awaiting-validation")||t.find(".awaiting-validation").length>0)return n.AwaitSubmit(i(this).attr("disabled",!0)),!1;n.trigger(a.$object.is(".step:last")?"submitfailed":"nextfailed continuefailed",[a,t.find(".staircase-has-error, .awaiting-validation")]),n.scroll(i(".staircase-has-error, .awaiting-validation").first()),e=!0}var r=!0;if(a.$rules.length>0){var o=a.$rules;for(var u in o){var l=o[u],d=[c(n),c(a),window.jQuery];for(var f in l.inputs){var h=i(l.inputs[f]);h.length>1&&(h=h.filter(function(){return!!("checkbox"!=i(this).attr("type")&&"radio"!=i(this).attr("type")||i(this).is(":checked"))})),d.push(h.length>0?h:void 0)}l.callback.apply(l,d)===!1&&(r=!1)}}if(r||(n.trigger(a.$object.is(".step:last")?"submitfailed":"nextfailed continuefailed",[a]),n.scroll(i(".staircase-has-error, .awaiting-validation").first()),e=!0),e)return!1;if(n.Steps.length>a.$index+1)return n.trigger("next continue",[a,n.Steps[a.$index+1]])===!1?!1:(n.Steps[a.$index+1].Focus(),!1);if(!t.closest("form").length&&window.console){console.log("%cStaircase Submit Event:","font-weight: bold; font-size: 1.2em; color: #333;"),console.log("%cYou are seeing this table because no submissible <form> element was found in the DOM.","font-size: .8em;"),console.log(" ");var p=[];i($allinputs).each(function(){p.push({Field:i(this).attr("name"),Value:String(this.value).trim().match(/^-?([0-9]+)(\.([0-9]+))?$/)?parseFloat(this.value):this.value,Type:"object"==typeof this.value?"object":String(this.value).trim().match(/^-?([0-9]+)(\.([0-9]+))$/)?"float":String(this.value).trim().match(/^-?([0-9]+)$/)?"int":"string"})}),window.console.table?console.table(p,["Field","Value","Type"]):console.log(p),n.trigger("debug",[n,a])}if(n.trigger("submit",[n])===!1)return!1}}),s.checkboxGroups&&i("string"==typeof s.checkboxGroups?t.find(s.checkboxGroups):t.find(".checkbox-group").length>0?t.find(".checkbox-group"):t).on("change",'input[type="checkbox"]',function(){i(this).is(":checked")&&i(this).closest(".staircase-has-error").removeClass("staircase-has-error")}),t.find('script[type="staircase/condition"]').each(function(){a.Condition(i(this).html())}).remove(),a};return a.find(s.steps).each(function(){n.Steps.push(new l(this,arguments[0]).Blur(!0))}),n.Steps[0].Focus(!0),window.Staircases[s.ID]=n,n}}();