(function(){window.$staircase="5.2.4";String.prototype.trim=function(g){var e=this,j,f=0,h=0;e+="";if(!g){j=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000"}else{g+="";j=g.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1")}f=e.length;for(h=0;h<f;h++){if(j.indexOf(e.charAt(h))===-1){e=e.substring(h);break}}f=e.length;for(h=f-1;h>=0;h--){if(j.indexOf(e.charAt(h))===-1){e=e.substring(0,h+1);break}}return j.indexOf(e.charAt(0))===-1?e:""};String.prototype.hash=function(h){var f="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<>!:;,.$";h=h?h:8;for(var g=0;g<h;g++){f+=e.charAt(Math.floor(Math.random()*e.length))}return f};Number.prototype.toDate=function a(j){var p,i,l="Sun Mon Tues Wednes Thurs Fri Satur January February March April May June July August September October November December".split(" "),n=/\\?(.?)/gi,m=function(e,f){return i[e]?i[e]():f},o=function(e,f){for(e=String(e);e.length<f;){e="0"+e}return e};i={d:function(){return o(i.j(),2)},D:function(){return i.l().slice(0,3)},j:function(){return p.getDate()},l:function(){return l[i.w()]+"day"},N:function(){return i.w()||7},S:function(){var e=i.j(),f=e%10;3>=f&&1==parseInt(e%100/10,10)&&(f=0);return["st","nd","rd"][f-1]||"th"},w:function(){return p.getDay()},z:function(){var e=new Date(i.Y(),i.n()-1,i.j()),f=new Date(i.Y(),0,1);return Math.round((e-f)/86400000)},W:function(){var e=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),f=new Date(e.getFullYear(),0,4);return o(1+Math.round((e-f)/86400000/7),2)},F:function(){return l[6+i.n()]},m:function(){return o(i.n(),2)},M:function(){return i.F().slice(0,3)},n:function(){return p.getMonth()+1},t:function(){return(new Date(i.Y(),i.n(),0)).getDate()},L:function(){var e=i.Y();return 0===e%4&0!==e%100|0===e%400},o:function(){var e=i.n(),f=i.W();return i.Y()+(12===e&&9>f?1:1===e&&9<f?-1:0)},Y:function(){return p.getFullYear()},y:function(){return i.Y().toString().slice(-2)},a:function(){return 11<p.getHours()?"pm":"am"},A:function(){return i.a().toUpperCase()},B:function(){var e=3600*p.getUTCHours(),h=60*p.getUTCMinutes(),g=p.getUTCSeconds();return o(Math.floor((e+h+g+3600)/86.4)%1000,3)},g:function(){return i.G()%12||12},G:function(){return p.getHours()},h:function(){return o(i.g(),2)},H:function(){return o(i.G(),2)},i:function(){return o(p.getMinutes(),2)},s:function(){return o(p.getSeconds(),2)},u:function(){return o(1000*p.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var f=new Date(i.Y(),0),k=Date.UTC(i.Y(),0),h=new Date(i.Y(),6),g=Date.UTC(i.Y(),6);return f-k!==h-g?1:0},O:function(){var e=p.getTimezoneOffset(),f=Math.abs(e);return(0<e?"-":"+")+o(100*Math.floor(f/60)+f%60,4)},P:function(){var e=i.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-p.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(n,m)},r:function(){return"D, d M Y H:i:s O".replace(n,m)},U:function(){return p/1000|0}};return function(e,f){p=void 0===f?new Date:f instanceof Date?new Date(f):new Date(1000*f);return e.replace(n,m)}(j,this)};try{window.location.param=function(g,f){if(!f){var f=window.location.search}var e=RegExp("[?&](?:amp;)?"+(g.replace(/(\[|\]|\{|\}|\?|\/|\\|\||\(|\))/g,"\\$1"))+"=([^&]*)").exec(f);return e&&decodeURIComponent(e[1].replace(/\+/g," "))};Object.defineProperty(window.location,"params",{set:function(){},get:function(){var f={},e=window.location.search.substr(1).split("&");if(e){for(var g in e){e[g]=e[g].replace(/^(?:amp;)?([^=]+)=(.*)?$/,"$1\n$2").split("\n");if(f[e[g][0]]){f[e[g][0]]=[f[e[g][0]]];f[e[g][0]].push(e[g][1])}else{f[e[g][0]]=e[g][1]}}}return f}})}catch(c){if(window.console){console.error("Your browser does not support changes to window.location.",c)}}window.jQuery.fn.staircase=function(e){var f=window.jQuery;if(f(this).length==1){var g=f(this).data("staircase");if(!g){f(this).data("staircase",g=new Staircase(this,e?e:{}))}return g}else{return f(this).each(function(){if(!f(this).data("staircase")){f(this).data("staircase",new Staircase(this,e?e:{}))}})}};window.jQuery("input[staircase-value]").each(function(){var f=window.jQuery,e=f(this).attr("staircase-value").replace(/#{(.*?)}/g,function(g,k){if(k.match(/^date\.(.*)$/i)){return(new Date/1000).toDate(k.replace(/^date\.(.*)$/i,"$1"))}else{if(k.match(/^cookies?\.(.*)$/i)){var j=k.replace(/^cookies?\.(.*)$/i,"$1"),l=document.cookie.split("; ");for(var h in l){if(l[h].split("=")[0]==j){return l[h].substr(j.length+1)}}return""}else{var n=window;k=k.split(".");for(var h in k){if(n[k[h]]){n=n[k[h]]}else{return undefined}}if(n!=window){return n}}}});f(this).removeAttr("staircase-value").val(e)});if(!document.title||document.title.match(/\.(html?|php)((\?|#)(.*?)?)?$/i)||$("title").length==0){var d=($("h1, h2, h3, h4, h5, h6").first().text()||"").trim();if(!d){d=($("img[alt]").first().attr("alt")||"").trim()}if(!d){d=($("p").first().text().trim()||"").split(" ").slice(0,4).join(" ").trim()}if(!d&&window.location.href.match(/\.(html?|php)((\?|#)(.*?)?)?$/i)){d=window.location.href.replace(/(.*)\/(.*?)\.(html?|php)((\?|#)(.*?)?)?$/i,"$2").replace(/[-_\.]/g," ").split(" ");for(var b in d){d[b]=d[b][0].toUpperCase()+d[b].substr(1).toLowerCase()}d=d.join(" ")}document.title=d}window.Data8API=function(h,f){var g=this,e=false;g.APIKey=h;g.License=f;g.Cache={};g.DefaultCountry="GB";g.Verify=function(m,l,o){if(!o&&l&&typeof l=="function"){o=l;l="email"}if(!o||typeof o!="function"){return g}if(g.Cache[l]&&g.Cache[l][m]){if(g.Cache[l][m]!=="loading"){o.call(g.Cache[l][m],g.Cache[l][m].IsValid)}return g}for(var k in window.Staircases){window.Staircases[k].trigger("data8",[g,window.Staircases[k]])}var n=function(i,p){g.Cache[l][m]=i;g.Cache[l][m].IsValid=!!p;o.call(g.Cache[l][m],g.Cache[l][m].IsValid)};if(!g.Cache[l]){g.Cache[l]={}}g.Cache[l][m]="loading";switch(String(l).trim().toLowerCase()){case"email":var j=new data8.emailvalidation();j.isvalid(m,"Address",null,function(i){n.call(this,i,i.Result.trim().match(/^(catchall|greylisted|valid)$/i))});break;case"mobile":m=m.replace(/[^0-9\+]/g,"");var j=new data8.mobilevalidation();j.isvalid(m,null,function(i){n.call(this,i,i.Result.trim().match(/^(blank|error|success|timedout|unavailable)$/i))});break;case"landline":case"telephone":case"phone":m=m.replace(/[^0-9\+]/g,"");var j=new data8.telephonelinevalidation();j.isvalid(m,null,function(i){n.call(this,i,i.Result.trim().match(/^(ambiguous|error|foreign|numberchanged|tempinvalid|valid)$/i))});break;default:g.Cache[l][m]=undefined;break}return g};g.Lookup=function(j,o){if(!o||typeof o!="function"){return g}var m=j.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();if(g.Cache.Addresses&&g.Cache.Addresses[m]){if(g.Cache.Addresses[m]!=="loading"){o.call(g,g.Cache.Addresses[m],j)}return g}for(var k in window.Staircases){window.Staircases[k].trigger("data8lookup",[g,window.Staircases[k],j])}var n=function(i,p){g.Cache.Addresses[m]=i;g.Cache.Addresses[m].IsValid=!!p;o.call(g,g.Cache.Addresses[m],j)};if(!g.Cache.Addresses){g.Cache.Addresses={}}g.Cache.Addresses[m]="loading";var l=new data8.addresscapture();l.getfulladdress(g.License,j,"",[new data8.option("MaxLines","5"),new data8.option("FixTownCounty","true")],function(i){n.call(this,i,i.Results.length>0)});return g};g.Authenticate=function(k){if(!k||typeof k!="function"){return g}var j=function(){if(window.data8&&window.data8.addresscapture&&window.data8.emailvalidation&&window.data8.mobilevalidation&&window.data8.telephonelinevalidation){k.call(g)}else{setTimeout(j,50)}};if(e||$('script[src*="data-8.co.uk"]').lenght>0){return j(),g}e=true;var i=$(document.createElement("script")).appendTo("head")[0];i.onload=function(){data8.load("AddressCapture");data8.load("EmailValidation");data8.load("MobileValidation");data8.load("TelephoneLineValidation");j()};i.src="http://webservices.data-8.co.uk/javascript/loader.ashx?key="+g.APIKey;return g}};window.BriteVerify=function(f){var e=this;e.APIKey=f;e.Verify=function(g,h){if(g&&typeof g=="string"&&h&&typeof h=="function"){$.ajax({data:{address:g,apikey:e.APIKey},dataType:"json",success:function(i){if(i&&typeof i=="object"&&!i.errors){h.call(window,i.status)}},type:"get",url:"http://staircase.virtuosoadvertising.co.uk/proxy/briteverify.php"})}return null};return e};window.Staircases={};window.Staircase=function(e,o){var f=window.jQuery,l=f(e),i={},g=this,m=0,h={checkboxGroups:false,history:false,ID:"".hash(8),notifyDelay:3,steps:".step",stepBlur:null,stepFocus:null,validate:null,APIs:{briteverify:{APIKey:null,fields:'[validate="email"]',scoreFieldName:null,scoreFieldSuffix:"_bvscore"},data8:{APIKey:null}}},n=function(p){return p},k=function(r,q){for(var p in q){if(r[p]&&typeof r[p]=="object"&&typeof q[p]=="object"){r[p]=k(r[p],q[p])}else{r[p]=q[p]}}return r};if(o&&typeof o=="object"){h=k(h,o)}g.scroll=function(r,p){r=f(r);p=f(p?p:document.body);if(r.length==0||p.length==0){return g}if(jQuery.fn.scrollTo){p.scrollTo(r,500)}else{if(r[0].scrollIntoView){try{r[0].scrollIntoView({behavior:"smooth",block:"start"})}catch(q){r[0].scrollIntoView()}p[0].scrollTop-=20}else{var s=r.offset();if(s){p.scrollTop(s.top-20)}}}return g};g.on=function(q,r){if(q.trim().indexOf(" ")>-1){q=q.trim().split(" ");for(var p in q){g.on(q[p],r)}return g}q=q.trim();if(!i[q]){i[q]=[]}i[q].push(r);return g};g.off=function(q,r){if(q.trim().indexOf(" ")>-1){q=q.trim().split(" ");for(var p in q){g.off(q[p],r)}return g}q=q.trim();if(i[q]&&i[q].length>0){$newevents=[];if(r!==undeefined){for(var p in i[q]){if(i[q][p]!=r){$newevents.push(i[q][p])}}}i[q]=$newevents}return g};g.trigger=function(q,r){if(q.trim().indexOf(" ")>-1){q=q.trim().split(" ");for(var p in q){g.trigger(q[p],r)}return g}q=q.trim();if(i[q]&&i[q].length>0){for(var p in i[q]){if(i[q][p].apply(g,r?r:[])===false){return false}}}return g};g.Patterns={currency:/^(-)?([^a-zA-Z0-9 ])?([0-9\,]+)(\.([0-9]{2,}))?$/,date:[/^([0-9]{1,2})(\/|-|\.|,| )([0-9]{1,2})(\/|-|\.|,| )([0-9]{2,4})$/,/^((mon|monday|tue|tues|tuesday|wed|wednesday|thu|thurs|thursday|fri|friday|sat|saturday|sun|sunday)([\s]+))?([0-9]{1,2})(st|nd|rd|th)?([\s]+)?(jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|sept|september|oct|october|nov|november|dec|december)([\s]+)?([0-9]{2,4})$/i,/^([0-9]{2})$/,/^(1|2)([0-9]{3})$/],datepicker:/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,"default":/^(?!\s*$).+/,email:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,filename:/^(([^\/\\\?%\*:|"<>]+)?\.([^\/\\\?%\*:|"<>\.]+)|([^\/\\\?%\*:|"<>\.]+))$/,name:/^([ A-Za-z\.\-']+)$/,number:[/^-?([0-9]+)$/,/^-?([0-9]+)\.([0-9]+)$/,/^([0-9]+)$/,/^([0-9]+)\.([0-9]+)$/,/^-?([0-9]+)(\.([0-9]+))?$/],phone:[function(){return this.replace(/\s/g,"").match(/^(\+([0-9]{1,5})|0)(?!.*(\d)\1{9,})\d{9,}$/)},function(){return this.replace(/\s/g,"").match(/^(\+([0-9]{1,5})|07)(?!.*(\d)\1{9,})\d{9,}$/)},function(){return this.replace(/\s/g,"").match(/^(\+33|0)(?!.*(\d)\1{9,})\d{9,}$/)}],postcode:/^(([gG][iI][rR] {0,}0[aA]{2})|((([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y]?[0-9][0-9]?)|(([a-pr-uwyzA-PR-UWYZ][0-9][a-hjkstuwA-HJKSTUW])|([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y][0-9][abehmnprv-yABEHMNPRV-Y]))) {0,}[0-9][abd-hjlnp-uw-zABD-HJLNP-UW-Z]{2}))$/,time:/^([0-9]{1,2}):([0-9]{2})(:([0-9]{2}))?([\s]+)?(am|pm)?$/i,zipcode:/^(^\d{5}$)|(^\d{5}-\d{4}$)$/};g.Patterns.mobile=g.Patterns.phone[1];g.Patterns.landline=g.Patterns.telephone=g.Patterns.phone;g.Constraints={letters:/^([^0-9])$/,numbers:/^([^a-zA-Z])$/,symbols:/^([^0-9a-zA-Z])$/};g.$object=l;g.$current=0;g.Steps=[];f(window).on("hashchange popstate",function(){var s=/^#!\/([A-Z0-9<>\!\:\;\,\.\$]{8})\/([0-9]+)$/i;if(window.location.hash.match(/^#!?\/?$/)){for(var q in window.Staircases){if(window.Staircases[q].trigger("hashchange popstate",[window.Staircases[g.$current],window.location.hash])===false){return false}window.Staircases[q].Steps[0].Focus()}}else{if(window.location.hash.match(s)){var p=window.location.hash.replace(s,"$1"),r=parseInt(window.location.hash.replace(s,"$2"));if(window.Staircases[p]&&window.Staircases[p].Steps[r]&&window.Staircases[p].Steps[r].Visited){if(window.Staircases[p].trigger("hashchange popstate",[p,r])===false){return false}window.Staircases[p].Steps[r].Focus()}}}f(window).scrollTop(m)});g.Extend=function(p,q){g.Patterns[p]=q;return g};g.Validate=function(w,v){if(!w){return false}w=f(w);if(!v){v=w.attr("validate")}if(v){if(g.trigger("beforevalidate",[w])===false){return false}if((v=="select"||v=="selected")&&w.is("select")){var s=w.val(),x=w.find("option").first(),r=(x.attr("value")===undefined)?x.html():x.attr("value");if(typeof s=="object"){for(var u in s){if(s[u]==r){return false}}}if(s==r){if(g.trigger("aftervalidate validate",[w,false])===true){return true}return false}if(g.trigger("aftervalidate validate",[w,true])===false){return false}return true}else{if((v=="checked"||v=="unchecked")&&(w.attr("type")=="checkbox"||w.attr("type")=="radio")){var p=!((v=="checked"&&!w.is(":checked"))||(v=="unchecked"&&w.is(":checked"))),q=g.trigger("aftervalidate validate",[w,p]);if(q===true||q===false){return q}return p}var t=g.Patterns,y=(v.indexOf("[")>-1)?v.replace(/\[([0-9]+)\]/g,"\n$1").split("\n"):[v];if(t){if(y.length>1){for(var u=0;u<y.length;u++){if(t[y[u]]){t=t[y[u]]}else{break}}}else{if(typeof t[y[0]]=="object"&&!(t[y[0]] instanceof RegExp)){t=t[y[0]][0]}else{t=t[y[0]]}}if(t&&(t instanceof RegExp||typeof t=="function")){var p=false;if(t instanceof RegExp){p=!!w[0].value.match(t)}else{if(typeof t=="function"){p=!!t.call(w[0].value)}}var q=g.trigger("aftervalidate validate",[w,p]);if(q===true||q===false){return q}return p}}}}if(h.validate&&typeof h.validate=="function"){var p=!!h.validate.call(w[0],g);g.trigger("aftervalidate validate",[w,p]);return p}return false};g.To=function(p){g.trigger("switch",[p]);if(p<g.$current){g.Steps[p].Focus()}else{if(g.Steps[p]&&g.Steps[g.$current].Validate()){g.Steps[p].Focus()}}return g};g.Next=function(){g.trigger("switch next",[g.$current+1]);if(g.Steps[g.$current+1]&&g.Steps[g.$current].Validate()){g.Steps[g.$current+1].Focus()}return g};g.Prev=function(){g.trigger("switch prev previous",[g.$current-1]);if(g.Steps[g.$current-1]){g.Steps[g.$current-1].Focus()}return g};var j=function(){var q=f(arguments[0]),p=this,r=null;$toconstrain='input:not([type="button"], [type="submit"], [type="image"])[constrain], textarea[constrain]',$allinputs='input:not([type="button"], [type="submit"], [type="image"])[name], select[name], textarea[name]',$inputs='input:not([type="button"], [type="submit"], [type="image"])[validate], select[validate], textarea[validate]',$buttons='input[type="button"].next, input[type="button"].continue, input[type="button"].submit, input[type="submit"], button',$backbuttons='input[type="button"].prev, input[type="submit"].prev, button.prev, input[type="button"].back, input[type="submit"].back, button.back';p.$index=arguments[1];p.$object=q;p.$rules=[];Object.defineProperty(q,"Visited",{get:function(){return r},set:function(){r=(arguments[0]?arguments[0]:true)}});p.Focus=function(s){for(var t in g.Steps){g.Steps[t].Blur(s)}if(!q.is(":visible")){g.$current=p.$index;if(!q.Visited){q.Visited=new Date()}if(!s){q.trigger("focus")}q.show();var u="!/"+h.ID+"/"+p.$index;m=f(window).scrollTop();if(p.$index>0&&window.location.hash!="#"+u){location.hash=u}else{if(p.$index==0){location.hash="!/"}}g.trigger("stepfocus",[p])}return p};p.Blur=function(s){if(q.is(":visible")){if(!s){q.trigger("blur")}q.hide();g.trigger("stepblur",[p])}return p};p.Validate=function(u,x){if(!u){var s=true;q.find($inputs).each(function(){if(f(this).attr("optional")){if(f(this).val()&&!p.Validate(this)){s=false}}else{if(!p.Validate(this)){s=false}}});return s}u=f(u);if(g.trigger("beforestepvalidate",[p,u])===false){return false}var w=(x!==undefined)?(!!x):(u.attr("optional")?(!u.val()||!!g.Validate(u)):!!g.Validate(u)),v=u.closest("label").length?u.closest("label"):((u.attr("id")&&f('label[for="'+u.attr("id")+'"]').length)?f('label[for="'+u.attr("id")+'"]'):false),t=f(v?v.add(u):u);t.removeClass("staircase-has-error staircase-highlight-error");if(!w){t.addClass("staircase-has-error staircase-highlight-error");t.data("notify-timeout",setTimeout(function(){t.removeClass("staircase-highlight-error")},h.notifyDelay>300?h.notifyDelay:(h.notifyDelay*1000)));g.trigger("stepvalidate",[p,false]);return false}if(t.data("notify-timeout")){window.clearTimeout(t.data("notify-timeout"))}g.trigger("stepvalidate",[p,true]);return true};p.Condition=function(u){if(typeof u!="function"&&typeof u!="string"){return p}var t=["Staircase","Step","$"],s={};q.find('input:not([type="button"], [type="submit"], [type="image"])[name], textarea[name], select[name]').each(function(){var v=f(this).attr("name");if(s[v]){if(s[v].length===undefined){s[v]=[s[v]]}s[v].push(this)}else{t.push(v);s[v]=this}});g.trigger("addcondition",[p,p.$rules.push({callback:(typeof u=="function")?u:new Function(t,u),inputs:s})-1]);return p};q.on("keydown",$toconstrain,function(u){var s=f(this),t=s.attr("constrain");t=g.Constraints[t]?g.Constraints[t]:null;if(t&&!String.fromCharCode(u.keyCode>=96&&u.keyCode<=105?(u.keyCode-48):u.keyCode).match(t)){g.trigger("constrained",[s,t]);return false}});q.on("change validate",$inputs,function(){var w=f(this),y=w.closest("label"),v=f(y?y.add(w):w);if(h.APIs.briteverify.APIKey&&w.filter(function(){var A=h.APIs.briteverify.fields,C=false;if(typeof A=="string"){if(A.indexOf(",")>-1){A=A.split(", ")}else{A=[A]}}A.push("*[bv-score]");for(var B in A){if(A[B].trim()){C=C?true:w.is(A[B].trim())}}return C}).length&&g.Validate(w[0],"email")){if(g.trigger("beforebriteverify",[w])===false){return false}var s=w.attr("bv-score")?w.attr("bv-score"):(h.APIs.briteverify.scoreFieldName?h.APIs.briteverify.scoreFieldName:w.attr("name")+h.APIs.briteverify.scoreFieldSuffix),t=(f('input[name="'+s+'"]').length>0)?f('input[name="'+s+'"]'):w.data("briteverify-scorefield");if(!t){t=f('<input type="hidden" tabindex="-1" name="'+s+'" />').insertAfter(w).on("focus",function(){w.focus()})}w.data("briteverify-scorefield",t);new BriteVerify(h.APIs.briteverify.APIKey).Verify(w[0].value,function(A){g.trigger("briteverify",[w,A]);t.val(A)})}if((w.attr("d8")||w.attr("d8-lookup-street"))&&w[0].value&&h.APIs.data8&&h.APIs.data8.APIKey){if(w.attr("d8")){if(p.Validate(w[0])){v.addClass("awaiting-validation");if(g.trigger("beforedata8",[w])===false){return v.removeClass("awaiting-validation"),false}if(!g.Data8){g.Data8=new Data8API(h.APIs.data8.APIKey,h.APIs.data8.License)}g.Data8.Authenticate(function(){g.Data8.Verify(w.val().trim(),w.attr("d8"),function(A){v.removeClass("awaiting-validation");if(typeof this=="object"&&this.IsValid===undefined){return}if(A){v.removeClass("staircase-has-error staircase-highlight-error");p.Validate(w[0],true)}else{v.addClass("staircase-has-error staircase-highlight-error");w.data("notify-timeout",setTimeout(function(){v.removeClass("staircase-highlight-error")},h.notifyDelay>300?h.notifyDelay:(h.notifyDelay*1000)));p.Validate(w[0],false)}g.trigger("data8",[w,A])})})}}else{if(w.attr("d8-lookup-street")){var z=w.data("d8-postcode-validated-successfully");if(!z||z!=w.val().replace(/[^a-zA-Z0-9]/g,"").toUpperCase()){var u=f('*[name="'+w.attr("d8-lookup-street").toLowerCase().trim()+'"]'),x=w.attr("d8-lookup-city")||"";if(x){x=f('*[name="'+x.toLowerCase().trim()+'"]');if(x.length==0){x=f('<input type="hidden" name="'+w.attr("d8-lookup-city")+'" />').insertAfter(u);g.trigger("data8lookupcityappended",[x])}}if(p.Validate(w[0])){v.addClass("awaiting-validation");if(g.trigger("beforedata8lookup",[w,u])===false){return v.removeClass("awaiting-validation"),false}if(!g.Data8){g.Data8=new Data8API(h.APIs.data8.APIKey,h.APIs.data8.License)}g.Data8.Authenticate(function(){g.Data8.Lookup(w[0].value,function(A,C){C=C.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();v.removeClass("awaiting-validation");if(!A.IsValid){return p.Validate(w[0],false),false}else{w.data("d8-postcode-validated-successfully",w.val().replace(/[^a-zA-Z0-9]/g,"").toUpperCase());p.Validate(w[0],true)}var B=["class","id","name","style"];u.each(function(){var H=f(this),G=H;if(!H.data("current-postcode")||H.data("current-postcode")!=C){if(!H.is("select")){G=f('<select validate="selected"></select>').on("change",function(){if(this.value=="N/A"){u.each(function(){var L=f(this).data("select-counterpart");f(this).insertAfter(L);L.remove()}).first().focus()}else{var K=f(this).find('option[value="'+this.value+'"]');if(x){x.val(K.attr("city"))}}});for(var E in B){if(H.is("["+B[E]+"]")){G.attr(B[E],H.attr(B[E]))}}G.insertAfter(H).data("original",H);H.data("select-counterpart",G).detach()}G.data("current-postcode",C).html('<option value="">Please Select Your Address...</option>');for(var E in A.Results){var J=[],I=[];for(var D=0;D<(A.Results[E].Address.Lines.length-1);D++){var F=A.Results[E].Address.Lines[D];if(F){J.push(F)}I.push(F)}J=J.join(", ");G.append('<option value="'+J+'" city="'+I[3]+'">'+J+"</option>")}G.append('<option value="N/A">My address is not listed here</option>')}});g.trigger("data8lookup",[w,u,A])})})}}}}}else{p.Validate(w[0])}});q.on("click",$backbuttons,function(){if(!f(this).is($buttons)){if(g.trigger("back",[p,f(this)])===false){return false}if(p.$index>0){g.Steps[p.$index-1].Focus()}return false}});q.on("click",$buttons,function(){if(!f(this).is($backbuttons)){var u=false;if(g.trigger("beforesubmit",[p,f(this)])===false){return false}q.find($inputs).trigger("validate");if(h.checkboxGroups){f((typeof h.checkboxGroups=="string")?q.find(h.checkboxGroups):((q.find(".checkbox-group").length)>0?q.find(".checkbox-group"):q)).each(function(){var B=f(this);if(B.find('input:not([type="button"], [type="submit"], [type="image"]), select, textbox').length==B.find('input[type="checkbox"]').length){if(B.find('input[type="checkbox"]:checked').length==0){B.addClass("staircase-has-error staircase-highlight-error");B.data("notify-timeout",setTimeout(function(){B.removeClass("staircase-highlight-error")},h.notifyDelay>300?h.notifyDelay:(h.notifyDelay*1000)))}else{B.removeClass("staircase-has-error staircase-highlight-error");if(B.data("notify-timeout")){window.clearTimeout(B.data("notify-timeout"))}}}})}if(q.is(".staircase-has-error, .awaiting-validation")||q.find(".staircase-has-error, .awaiting-validation").length>0){g.trigger(p.$object.is(".step:last")?"submitfailed":"nextfailed continuefailed",[p,q.find(".staircase-has-error, .awaiting-validation")]);g.scroll(f(".staircase-has-error, .awaiting-validation").first());u=true}var A=true;if(p.$rules.length>0){var y=p.$rules;for(var t in y){var w=y[t],v=[n(g),n(p),window.jQuery];for(var s in w.inputs){var x=f(w.inputs[s]);if(x.length>1){x=x.filter(function(){return((f(this).attr("type")=="checkbox"||f(this).attr("type")=="radio")&&!f(this).is(":checked"))?false:true})}v.push((x.length>0)?x:undefined)}if(w.callback.apply(w,v)===false){A=false}}}if(!A){g.trigger(p.$object.is(".step:last")?"submitfailed":"nextfailed continuefailed",[p]);g.scroll(f(".staircase-has-error, .awaiting-validation").first());u=true}if(u){return false}if(g.Steps.length>(p.$index+1)){if(g.trigger("next continue",[p,g.Steps[p.$index+1]])===false){return false}return g.Steps[p.$index+1].Focus(),false}if(!q.closest("form").length&&window.console){console.log("%cStaircase Submit Event:","font-weight: bold; font-size: 1.2em; color: #333;");console.log("%cYou are seeing this table because no submissible <form> element was found in the DOM.","font-size: .8em;");console.log(" ");var z=[];f($allinputs).each(function(){z.push({Field:f(this).attr("name"),Value:String(this.value).trim().match(/^-?([0-9]+)(\.([0-9]+))?$/)?parseFloat(this.value):this.value,Type:(typeof this.value=="object")?"object":(String(this.value).trim().match(/^-?([0-9]+)(\.([0-9]+))$/)?"float":(String(this.value).trim().match(/^-?([0-9]+)$/)?"int":"string"))})});if(window.console.table){console.table(z,["Field","Value","Type"])}else{console.log(z)}g.trigger("debug",[g,p])}if(g.trigger("submit",[g])===false){return false}}});if(h.checkboxGroups){f((typeof h.checkboxGroups=="string")?q.find(h.checkboxGroups):((q.find(".checkbox-group").length)>0?q.find(".checkbox-group"):q)).on("change",'input[type="checkbox"]',function(){if(f(this).is(":checked")){f(this).closest(".staircase-has-error").removeClass("staircase-has-error")}})}q.find('script[type="staircase/condition"]').each(function(){p.Condition(f(this).html())}).remove();return p};l.find(h.steps).each(function(){g.Steps.push(new j(this,arguments[0]).Blur(true))});g.Steps[0].Focus(true);window.Staircases[h.ID]=g;return g}})();