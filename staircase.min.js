!function(){window.$staircase="5.2.5",String.prototype.trim=function(a){var c,b=this,d=0,e=0;for(b+="",a?(a+="",c=a.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1")):c=" \n\r	\f\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000",d=b.length,e=0;d>e;e++)if(-1===c.indexOf(b.charAt(e))){b=b.substring(e);break}for(d=b.length,e=d-1;e>=0;e--)if(-1===c.indexOf(b.charAt(e))){b=b.substring(0,e+1);break}return-1===c.indexOf(b.charAt(0))?b:""},String.prototype.hash=function(a){var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<>!:;,.$";a=a?a:8;for(var d=0;a>d;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b},Number.prototype.toDate=function(a){var b,c,d="Sun Mon Tues Wednes Thurs Fri Satur January February March April May June July August September October November December".split(" "),e=/\\?(.?)/gi,f=function(a,b){return c[a]?c[a]():b},g=function(a,b){for(a=String(a);a.length<b;)a="0"+a;return a};return c={d:function(){return g(c.j(),2)},D:function(){return c.l().slice(0,3)},j:function(){return b.getDate()},l:function(){return d[c.w()]+"day"},N:function(){return c.w()||7},S:function(){var a=c.j(),b=a%10;return 3>=b&&1==parseInt(a%100/10,10)&&(b=0),["st","nd","rd"][b-1]||"th"},w:function(){return b.getDay()},z:function(){var a=new Date(c.Y(),c.n()-1,c.j()),b=new Date(c.Y(),0,1);return Math.round((a-b)/864e5)},W:function(){var a=new Date(c.Y(),c.n()-1,c.j()-c.N()+3),b=new Date(a.getFullYear(),0,4);return g(1+Math.round((a-b)/864e5/7),2)},F:function(){return d[6+c.n()]},m:function(){return g(c.n(),2)},M:function(){return c.F().slice(0,3)},n:function(){return b.getMonth()+1},t:function(){return new Date(c.Y(),c.n(),0).getDate()},L:function(){var a=c.Y();return 0===a%4&0!==a%100|0===a%400},o:function(){var a=c.n(),b=c.W();return c.Y()+(12===a&&9>b?1:1===a&&b>9?-1:0)},Y:function(){return b.getFullYear()},y:function(){return c.Y().toString().slice(-2)},a:function(){return 11<b.getHours()?"pm":"am"},A:function(){return c.a().toUpperCase()},B:function(){var a=3600*b.getUTCHours(),c=60*b.getUTCMinutes(),d=b.getUTCSeconds();return g(Math.floor((a+c+d+3600)/86.4)%1e3,3)},g:function(){return c.G()%12||12},G:function(){return b.getHours()},h:function(){return g(c.g(),2)},H:function(){return g(c.G(),2)},i:function(){return g(b.getMinutes(),2)},s:function(){return g(b.getSeconds(),2)},u:function(){return g(1e3*b.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var a=new Date(c.Y(),0),b=Date.UTC(c.Y(),0),d=new Date(c.Y(),6),e=Date.UTC(c.Y(),6);return a-b!==d-e?1:0},O:function(){var a=b.getTimezoneOffset(),c=Math.abs(a);return(a>0?"-":"+")+g(100*Math.floor(c/60)+c%60,4)},P:function(){var a=c.O();return a.substr(0,3)+":"+a.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-b.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(e,f)},r:function(){return"D, d M Y H:i:s O".replace(e,f)},U:function(){return b/1e3|0}},function(a,c){return b=void 0===c?new Date:c instanceof Date?new Date(c):new Date(1e3*c),a.replace(e,f)}(a,this)};try{window.location.param=function(a,b){if(!b)var b=window.location.search;var c=RegExp("[?&](?:amp;)?"+a.replace(/(\[|\]|\{|\}|\?|\/|\\|\||\(|\))/g,"\\$1")+"=([^&]*)").exec(b);return c&&decodeURIComponent(c[1].replace(/\+/g," "))},Object.defineProperty(window.location,"params",{set:function(){},get:function(){var a={},b=window.location.search.substr(1).split("&");if(b)for(var c in b)b[c]=b[c].replace(/^(?:amp;)?([^=]+)=(.*)?$/,"$1\n$2").split("\n"),a[b[c][0]]?(a[b[c][0]]=[a[b[c][0]]],a[b[c][0]].push(b[c][1])):a[b[c][0]]=b[c][1];return a}})}catch(a){window.console&&console.error("Your browser does not support changes to window.location.",a)}if(window.jQuery.fn.staircase=function(a){var b=window.jQuery;if(1==b(this).length){var c=b(this).data("staircase");return c||b(this).data("staircase",c=new Staircase(this,a?a:{})),c}return b(this).each(function(){b(this).data("staircase")||b(this).data("staircase",new Staircase(this,a?a:{}))})},window.jQuery("input[staircase-value]").each(function(){var a=window.jQuery,b=a(this).attr("staircase-value").replace(/#{(.*?)}/g,function(a,b){if(b.match(/^date\.(.*)$/i))return(new Date/1e3).toDate(b.replace(/^date\.(.*)$/i,"$1"));if(b.match(/^cookies?\.(.*)$/i)){var c=b.replace(/^cookies?\.(.*)$/i,"$1"),d=document.cookie.split("; ");for(var e in d)if(d[e].split("=")[0]==c)return d[e].substr(c.length+1);return""}var f=window;b=b.split(".");for(var e in b){if(!f[b[e]])return void 0;f=f[b[e]]}return f!=window?f:void 0});a(this).removeAttr("staircase-value").val(b)}),!document.title||document.title.match(/\.(html?|php)((\?|#)(.*?)?)?$/i)||0==$("title").length){var b=($("h1, h2, h3, h4, h5, h6").first().text()||"").trim();if(b||(b=($("img[alt]").first().attr("alt")||"").trim()),b||(b=($("p").first().text().trim()||"").split(" ").slice(0,4).join(" ").trim()),!b&&window.location.href.match(/\.(html?|php)((\?|#)(.*?)?)?$/i)){b=window.location.href.replace(/(.*)\/(.*?)\.(html?|php)((\?|#)(.*?)?)?$/i,"$2").replace(/[-_\.]/g," ").split(" ");for(var c in b)b[c]=b[c][0].toUpperCase()+b[c].substr(1).toLowerCase();b=b.join(" ")}document.title=b}window.Data8API=function(a,b){var c=this,d=!1;c.APIKey=a,c.License=b,c.Cache={},c.DefaultCountry="GB",c.Verify=function(a,b,d){if(!d&&b&&"function"==typeof b&&(d=b,b="email"),!d||"function"!=typeof d)return c;if(c.Cache[b]&&c.Cache[b][a])return("loading"!==c.Cache[b][a]||"object"==typeof c.Cache[b][a]&&!c.Cache[b][a].TimedOut)&&d.call(c.Cache[b][a],c.Cache[b][a].IsValid,c.Cache[b][a]),c;for(var e in window.Staircases)window.Staircases[e].trigger("data8",[c,window.Staircases[e],null]);var f=function(e,f){c.Cache[b][a]=e,c.Cache[b][a].RequestDuration=(1*new Date-g)/1e3,c.Cache[b][a].IsValid=!!f,d.call(c.Cache[b][a],c.Cache[b][a].IsValid,c.Cache[b][a])},g=1*new Date,h=setTimeout(function(){c.Cache[b][a]={IsValid:!0,RequestDuration:(1*new Date-g)/1e3,TimedOut:!0},f.call(c.Cache[b][a],c.Cache[b][a].IsValid,c.Cache[b][a])},5e3);switch(c.Cache[b]||(c.Cache[b]={}),c.Cache[b][a]="loading",String(b).trim().toLowerCase()){case"email":var i=new data8.emailvalidation;i.isvalid(a,"Address",null,function(a){clearTimeout(h),f.call(this,a,a.Result.trim().match(/^(catchall|error|greylisted|inconclusive|valid)$/i))});break;case"mobile":case"landline":case"telephone":case"phone":a=a.replace(/[^0-9\+]/g,"");var i=new data8.internationaltelephonevalidation;i.isvalid(a,c.DefaultCountry,[new data8.option("UseMobileValidation","true"),new data8.option("UseLineValidation","true")],function(a){clearTimeout(h),f.call(this,a,a.Result.ValidationResult.trim().match(/^(nocoverage|valid)$/i))});break;default:clearTimeout(h),c.Cache[b][a]=void 0}return c},c.Lookup=function(a,b){if(!b||"function"!=typeof b)return c;var d=a.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();if(c.Cache.Addresses&&c.Cache.Addresses[d])return"loading"!==c.Cache.Addresses[d]&&b.call(c,c.Cache.Addresses[d],a),c;for(var e in window.Staircases)window.Staircases[e].trigger("data8lookup",[c,window.Staircases[e],a,null]);var f=function(e,f){c.Cache.Addresses[d]=e,c.Cache.Addresses[d].RequestDuration=(1*new Date-g)/1e3,c.Cache.Addresses[d].IsValid=!!f,b.call(c,c.Cache.Addresses[d],a,c.Cache.Addresses[d])},g=1*new Date,h=setTimeout(function(){c.Cache.Addresses[d]={IsValid:!1,RequestDuration:(1*new Date-g)/1e3,TimedOut:!0},f.call(c.Cache.Addresses[d],c.Cache.Addresses[d].IsValid,c.Cache.Addresses[d])},5e3);c.Cache.Addresses||(c.Cache.Addresses={}),c.Cache.Addresses[d]="loading";var i=new data8.addresscapture;return i.getfulladdress(c.License,a,"",[new data8.option("MaxLines","5"),new data8.option("FixTownCounty","true")],function(a){clearTimeout(h),f.call(this,a,a.Results.length>0)}),c},c.Authenticate=function(a){if(!a||"function"!=typeof a)return c;var b=function(){window.data8&&window.data8.addresscapture&&window.data8.emailvalidation&&window.data8.internationaltelephonevalidation?a.call(c):setTimeout(b,50)};if(d||$('script[src*="data-8.co.uk"]').lenght>0)return b(),c;d=!0;var e=$(document.createElement("script")).appendTo("head")[0];return e.onload=function(){data8.load("AddressCapture"),data8.load("EmailValidation"),data8.load("InternationalTelephoneValidation"),b()},e.src="http://webservices.data-8.co.uk/javascript/loader.ashx?key="+c.APIKey,c}},window.BriteVerify=function(a){var b=this;return b.APIKey=a,b.Cache={},b.Verify=function(a,c,d){if(a&&"string"==typeof a&&c&&"function"==typeof c){if(b.Cache[a])return"loading"!=b.Cache[a]&&c.call(window,b.Cache[a].status,b.Cache[a]),b;b.Cache[a]="loading";var e=function(e){e&&"object"==typeof e&&!e.errors?(b.Cache[a]=e,c.call(window,e.status,e)):d&&"function"==typeof d&&(b.Cache[a]=null,d.call(window))},f=1*new Date;setTimeout(function(){b.Cache[a]={status:"unknown",RequestDuration:(1*new Date-f)/1e3,TimedOut:!0},e.call(window,b.Cache[a].status,b.Cache[a])},5e3);$.ajax({data:{address:a,apikey:b.APIKey},dataType:"json",success:function(a){a.RequestDuration=(1*new Date-f)/1e3,e.call(this,a)},type:"get",url:"http://staircase.virtuosoadvertising.co.uk/proxy/briteverify.php"})}return b},b},window.Staircases={},window.Staircase=function(a,b){var c=window.jQuery,d=c(a),e={},f=this,g=0,h={checkboxGroups:!1,history:!1,ID:"".hash(8),notifyDelay:3,steps:".step",stepBlur:null,stepFocus:null,validate:null,APIs:{briteverify:{APIKey:null,fields:'[validate="email"]',markInput:!1,scoreFieldName:null,scoreFieldSuffix:"_bvscore"},data8:{APIKey:null,logging:!1}}},i=function(a){return a},j=function(a,b){for(var c in b)a[c]&&"object"==typeof a[c]&&"object"==typeof b[c]?a[c]=j(a[c],b[c]):a[c]=b[c];return a};b&&"object"==typeof b&&(h=j(h,b)),f.log=function(a){return c.ajax({type:"post",url:"http://staircase.virtuosoadvertising.co.uk/edge/log.php",data:{url:window.location.hostname,data:a}}),f},f.scroll=function(a,b){if(a=c(a),b=c(b?b:document.body),0==a.length||0==b.length)return f;if(jQuery.fn.scrollTo)b.scrollTo(a,500);else if(a[0].scrollIntoView){try{a[0].scrollIntoView({behavior:"smooth",block:"start"})}catch(d){a[0].scrollIntoView()}b[0].scrollTop-=20}else{var e=a.offset();e&&b.scrollTop(e.top-20)}return f},f.on=function(a,b){if(a.trim().indexOf(" ")>-1){a=a.trim().split(" ");for(var c in a)f.on(a[c],b);return f}return a=a.trim(),e[a]||(e[a]=[]),e[a].push(b),f},f.off=function(a,b){if(a.trim().indexOf(" ")>-1){a=a.trim().split(" ");for(var c in a)f.off(a[c],b);return f}if(a=a.trim(),e[a]&&e[a].length>0){if($newevents=[],b!==undeefined)for(var c in e[a])e[a][c]!=b&&$newevents.push(e[a][c]);e[a]=$newevents}return f},f.trigger=function(a,b){if(a.trim().indexOf(" ")>-1){a=a.trim().split(" ");for(var c in a)f.trigger(a[c],b);return f}if(a=a.trim(),e[a]&&e[a].length>0)for(var c in e[a])if(e[a][c].apply(f,b?b:[])===!1)return!1;return f},f.Patterns={currency:/^(-)?([^a-zA-Z0-9 ])?([0-9\,]+)(\.([0-9]{2,}))?$/,date:[/^([0-9]{1,2})(\/|-|\.|,| )([0-9]{1,2})(\/|-|\.|,| )([0-9]{2,4})$/,/^((mon|monday|tue|tues|tuesday|wed|wednesday|thu|thurs|thursday|fri|friday|sat|saturday|sun|sunday)([\s]+))?([0-9]{1,2})(st|nd|rd|th)?([\s]+)?(jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|sept|september|oct|october|nov|november|dec|december)([\s]+)?([0-9]{2,4})$/i,/^([0-9]{2})$/,/^(1|2)([0-9]{3})$/],datepicker:/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,"default":/^(?!\s*$).+/,email:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,filename:/^(([^\/\\\?%\*:|"<>]+)?\.([^\/\\\?%\*:|"<>\.]+)|([^\/\\\?%\*:|"<>\.]+))$/,name:/^([ A-Za-z\.\-']+)$/,number:[/^-?([0-9]+)$/,/^-?([0-9]+)\.([0-9]+)$/,/^([0-9]+)$/,/^([0-9]+)\.([0-9]+)$/,/^-?([0-9]+)(\.([0-9]+))?$/],phone:[function(){return this.replace(/\s/g,"").match(/^0(?!.*(\d)\1{9,})\d{9,}$/)},function(){return this.replace(/\s/g,"").match(/^07(?!.*(\d)\1{9,})\d{9,}$/)},function(){return this.replace(/\s/g,"").match(/^0(?!.*(\d)\1{9,})\d{9,}$/)},/^0(?!.*(\d)\1{9,})\d{9,}$/,/^07(?!.*(\d)\1{9,})\d{9,}$/,/^0(?!.*(\d)\1{9,})\d{9,}$/],postcode:/^(([gG][iI][rR] {0,}0[aA]{2})|((([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y]?[0-9][0-9]?)|(([a-pr-uwyzA-PR-UWYZ][0-9][a-hjkstuwA-HJKSTUW])|([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y][0-9][abehmnprv-yABEHMNPRV-Y]))) {0,}[0-9][abd-hjlnp-uw-zABD-HJLNP-UW-Z]{2}))$/,time:/^([0-9]{1,2}):([0-9]{2})(:([0-9]{2}))?([\s]+)?(am|pm)?$/i,zipcode:/^(^\d{5}$)|(^\d{5}-\d{4}$)$/},f.Patterns.mobile=f.Patterns.phone[1],f.Patterns.landline=f.Patterns.telephone=f.Patterns.phone,f.Constraints={letters:/^([^0-9])$/,numbers:/^([^a-zA-Z])$/,symbols:/^([^0-9a-zA-Z])$/},f.$object=d,f.$current=0,f.Steps=[],c(window).on("hashchange popstate",function(){var a=/^#!\/([A-Z0-9<>\!\:\;\,\.\$]{8})\/([0-9]+)$/i;if(window.location.hash.match(/^#!?\/?$/))for(var b in window.Staircases){if(window.Staircases[b].trigger("hashchange popstate",[window.Staircases[f.$current],window.location.hash])===!1)return!1;window.Staircases[b].Steps[0].Focus()}else if(window.location.hash.match(a)){var d=window.location.hash.replace(a,"$1"),e=parseInt(window.location.hash.replace(a,"$2"));if(window.Staircases[d]&&window.Staircases[d].Steps[e]&&window.Staircases[d].Steps[e].Visited){if(window.Staircases[d].trigger("hashchange popstate",[d,e])===!1)return!1;window.Staircases[d].Steps[e].Focus()}}c(window).scrollTop(g)}),f.Extend=function(a,b){return f.Patterns[a]=b,f},f.Validate=function(a,b){if(!a)return!1;if(a=c(a),b||(b=a.attr("validate")),b){if(f.trigger("beforevalidate",[a])===!1)return!1;if(("select"==b||"selected"==b)&&a.is("select")){var d=a.val(),e=a.find("option").first(),g=void 0===e.attr("value")?e.html():e.attr("value");if("object"==typeof d)for(var i in d)if(d[i]==g)return!1;return d==g?f.trigger("aftervalidate validate",[a,!1])===!0?!0:!1:f.trigger("aftervalidate validate",[a,!0])===!1?!1:!0}if(!("checked"!=b&&"unchecked"!=b||"checkbox"!=a.attr("type")&&"radio"!=a.attr("type"))){var j=!("checked"==b&&!a.is(":checked")||"unchecked"==b&&a.is(":checked")),k=f.trigger("aftervalidate validate",[a,j]);return k===!0||k===!1?k:j}var l=f.Patterns,m=b.indexOf("[")>-1?b.replace(/\[([0-9]+)\]/g,"\n$1").split("\n"):[b];if(l){if(m.length>1)for(var i=0;i<m.length&&l[m[i]];i++)l=l[m[i]];else l="object"!=typeof l[m[0]]||l[m[0]]instanceof RegExp?l[m[0]]:l[m[0]][0];if(l&&(l instanceof RegExp||"function"==typeof l)){var j=!1;l instanceof RegExp?j=!!a[0].value.match(l):"function"==typeof l&&(j=!!l.call(a[0].value));var k=f.trigger("aftervalidate validate",[a,j]);return k===!0||k===!1?k:j}}}if(h.validate&&"function"==typeof h.validate){var j=!!h.validate.call(a[0],f);return f.trigger("aftervalidate validate",[a,j]),j}return!1},f.To=function(a){return f.trigger("switch",[a]),a<f.$current?f.Steps[a].Focus():f.Steps[a]&&f.Steps[f.$current].Validate()&&f.Steps[a].Focus(),f},f.Next=function(){return f.trigger("switch next",[f.$current+1]),f.Steps[f.$current+1]&&f.Steps[f.$current].Validate()&&f.Steps[f.$current+1].Focus(),f},f.Prev=function(){return f.trigger("switch prev previous",[f.$current-1]),f.Steps[f.$current-1]&&f.Steps[f.$current-1].Focus(),f},f.AwaitSubmit=function(a){var b=function(){return c(".awaiting-validation",d).length>0?(setTimeout(b,100),!1):void a.removeAttr("disabled").click()};return b(),f};var k=function(){var a=c(arguments[0]),d=this,e=null;return $toconstrain='input:not([type="button"], [type="submit"], [type="image"])[constrain], textarea[constrain]',$allinputs='input:not([type="button"], [type="submit"], [type="image"])[name], select[name], textarea[name]',$inputs='input:not([type="button"], [type="submit"], [type="image"])[validate], select[validate], textarea[validate]',$buttons='input[type="button"].next, input[type="button"].continue, input[type="button"].submit, input[type="submit"], button',$backbuttons='input[type="button"].prev, input[type="submit"].prev, button.prev, input[type="button"].back, input[type="submit"].back, button.back',d.$index=arguments[1],d.$object=a,d.$rules=[],Object.defineProperty(a,"Visited",{get:function(){return e},set:function(){e=arguments[0]?arguments[0]:!0}}),d.Focus=function(b){for(var e in f.Steps)f.Steps[e].Blur(b);if(!a.is(":visible")){f.$current=d.$index,a.Visited||(a.Visited=new Date),b||a.trigger("focus"),a.show();var i="!/"+h.ID+"/"+d.$index;g=c(window).scrollTop(),d.$index>0&&window.location.hash!="#"+i?location.hash=i:0==d.$index&&(location.hash="!/"),f.trigger("stepfocus",[d])}return d},d.Blur=function(b){return a.is(":visible")&&(b||a.trigger("blur"),a.hide(),f.trigger("stepblur",[d])),d},d.Validate=function(b,e){if(!b){var g=!0;return a.find($inputs).each(function(){c(this).attr("optional")?c(this).val()&&!d.Validate(this)&&(g=!1):d.Validate(this)||(g=!1)}),g}if(b=c(b),f.trigger("beforestepvalidate",[d,b])===!1)return!1;var i=void 0!==e?!!e:b.attr("optional")?!b.val()||!!f.Validate(b):!!f.Validate(b),j=b.closest("label").length?b.closest("label"):b.attr("id")&&c('label[for="'+b.attr("id")+'"]').length?c('label[for="'+b.attr("id")+'"]'):!1,k=c(j?j.add(b):b);return k.removeClass("staircase-has-error staircase-highlight-error"),i?(k.data("notify-timeout")&&window.clearTimeout(k.data("notify-timeout")),f.trigger("stepvalidate",[d,!0]),!0):(k.addClass("staircase-has-error staircase-highlight-error"),k.data("notify-timeout",setTimeout(function(){k.removeClass("staircase-highlight-error")},h.notifyDelay>300?h.notifyDelay:1e3*h.notifyDelay)),f.trigger("stepvalidate",[d,!1]),!1)},d.Condition=function(b){if("function"!=typeof b&&"string"!=typeof b)return d;var e=["Staircase","Step","$"],g={};return a.find('input:not([type="button"], [type="submit"], [type="image"])[name], textarea[name], select[name]').each(function(){var a=c(this).attr("name");g[a]?(void 0===g[a].length&&(g[a]=[g[a]]),g[a].push(this)):(e.push(a),g[a]=this)}),f.trigger("addcondition",[d,d.$rules.push({callback:"function"==typeof b?b:new Function(e,b),inputs:g})-1]),d},a.on("keydown",$toconstrain,function(a){var b=c(this),d=b.attr("constrain");return d=f.Constraints[d]?f.Constraints[d]:null,d&&!String.fromCharCode(a.keyCode>=96&&a.keyCode<=105?a.keyCode-48:a.keyCode).match(d)?(f.trigger("constrained",[b,d]),!1):void 0}),a.on("focus blur keyup keydown change paint",$inputs,function(a){var b=c(this),d=b.closest("label");switch(d=0==d.length&&b.attr("name")?c('label[for="'+b.attr("name")+'"]'):d,d=d.length>0?d.add(b):b,a.type){case"focusin":d.addClass("focus");break;case"focusout":d.removeClass("focus");break;default:d[b.val().trim()?"removeClass":"addClass"]("empty")}}),c($inputs).trigger("paint"),a.on("change validate",$inputs,function(){var a=c(this),e=a.closest("label"),g=c(e?e.add(a):a);if(h.APIs.briteverify.APIKey&&a.filter(function(){var b=h.APIs.briteverify.fields,c=!1;"string"==typeof b&&(b=b.indexOf(",")>-1?b.split(", "):[b]),b.push("*[bv-score]");for(var d in b)b[d].trim()&&(c=c?!0:a.is(b[d].trim()));return c}).length&&f.Validate(a[0],"email")){if(f.trigger("beforebriteverify",[a])===!1)return!1;var i=a.attr("bv-score")?a.attr("bv-score"):h.APIs.briteverify.scoreFieldName?h.APIs.briteverify.scoreFieldName:a.attr("name")+(h.APIs.briteverify.scoreFieldSuffix||"_score"),j=c('input[name="'+i+'"]').length>0?c('input[name="'+i+'"]'):a.data("briteverify-scorefield");j||(j=c('<input type="hidden" tabindex="-1" name="'+i+'" />').insertAfter(a).on("focus",function(){a.focus()})),a.data("briteverify-scorefield",j),g.addClass("awaiting-validation"),f.BriteVerify||(f.BriteVerify=new BriteVerify(h.APIs.briteverify.APIKey)),f.BriteVerify.Verify(a[0].value,function(c,e){h.APIs.briteverify.markInput&&("invalid"!=c.trim().toLowerCase()?(g.removeClass("staircase-has-error staircase-highlight-error"),d.Validate(a[0],!0)):(g.addClass("staircase-has-error staircase-highlight-error"),a.data("notify-timeout",setTimeout(function(){g.removeClass("staircase-highlight-error")},h.notifyDelay>300?h.notifyDelay:1e3*h.notifyDelay)),d.Validate(a[0],!1))),g.removeClass("awaiting-validation"),b.APIs.briteverify.logging&&f.log({result:e,value:a.val()}),f.trigger("briteverify",[a,c,e]),j.val(c)})}if((a.attr("d8")||a.attr("d8-lookup-street"))&&a[0].value&&h.APIs.data8&&h.APIs.data8.APIKey){if(a.attr("d8")){if(d.Validate(a[0])){if(g.addClass("awaiting-validation"),f.trigger("beforedata8",[a])===!1)return g.removeClass("awaiting-validation"),!1;f.Data8||(f.Data8=new Data8API(h.APIs.data8.APIKey,h.APIs.data8.License)),f.Data8.Authenticate(function(){f.Data8.Verify(a.val().trim(),a.attr("d8"),function(c,e){g.removeClass("awaiting-validation"),("object"!=typeof this||void 0!==this.IsValid)&&(c?(g.removeClass("staircase-has-error staircase-highlight-error"),d.Validate(a[0],!0)):(g.addClass("staircase-has-error staircase-highlight-error"),a.data("notify-timeout",setTimeout(function(){g.removeClass("staircase-highlight-error")},h.notifyDelay>300?h.notifyDelay:1e3*h.notifyDelay)),d.Validate(a[0],!1)),b.APIs.data8.logging&&f.log({response:e,type:a.attr("d8"),value:a.val()}),f.trigger("data8",[a,c,e]))})})}}else if(a.attr("d8-lookup-street")){var k=a.data("d8-postcode-validated-successfully");if(!k||k!=a.val().replace(/[^a-zA-Z0-9]/g,"").toUpperCase()){var l=c('*[name="'+a.attr("d8-lookup-street").toLowerCase().trim()+'"]'),m=a.attr("d8-lookup-city")||"";if(m&&(m=c('*[name="'+m.toLowerCase().trim()+'"]'),0==m.length&&(m=c('<input type="hidden" name="'+a.attr("d8-lookup-city")+'" />').insertAfter(l),f.trigger("data8lookupcityappended",[m]))),d.Validate(a[0])){if(g.addClass("awaiting-validation"),f.trigger("beforedata8lookup",[a,l])===!1)return g.removeClass("awaiting-validation"),!1;f.Data8||(f.Data8=new Data8API(h.APIs.data8.APIKey,h.APIs.data8.License)),f.Data8.Authenticate(function(){f.Data8.Lookup(a[0].value,function(e,h,i){if(h=h.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),g.removeClass("awaiting-validation"),!e.IsValid)return d.Validate(a[0],!1),!1;a.data("d8-postcode-validated-successfully",a.val().replace(/[^a-zA-Z0-9]/g,"").toUpperCase()),d.Validate(a[0],!0);var j=["class","id","name","style"];l.each(function(){var a=c(this),b=a;if(!a.data("current-postcode")||a.data("current-postcode")!=h){if(!a.is("select")){b=c('<select validate="selected"></select>').on("change",function(){if("N/A"==this.value)l.each(function(){var a=c(this).data("select-counterpart");c(this).insertAfter(a),a.remove()}).first().focus();else{var a=c(this).find('option[value="'+this.value+'"]');m&&m.val(a.attr("city"))}});for(var d in j)a.is("["+j[d]+"]")&&b.attr(j[d],a.attr(j[d]));b.insertAfter(a).data("original",a),a.data("select-counterpart",b).detach()}b.data("current-postcode",h).html('<option value="">Please Select Your Address...</option>');for(var d in e.Results){for(var f=[],g=[],i=0;i<e.Results[d].Address.Lines.length-1;i++){var k=e.Results[d].Address.Lines[i];k&&f.push(k),g.push(k)}f=f.join(", "),b.append('<option value="'+f+'" city="'+g[3]+'">'+f+"</option>")}b.append('<option value="N/A">My address is not listed here</option>')}}),b.APIs.data8.logging&&f.log({response:i,type:"address",value:a.val()}),f.trigger("data8lookup",[a,l,e])})})}}}}else d.Validate(a[0])}),a.on("click",$backbuttons,function(){return c(this).is($buttons)?void 0:f.trigger("back",[d,c(this)])===!1?!1:(d.$index>0&&f.Steps[d.$index-1].Focus(),!1)}),a.on("click",$buttons,function(){if(!c(this).is($backbuttons)){var b=!1;if(f.trigger("beforesubmit",[d,c(this)])===!1)return!1;if(a.find($inputs).trigger("validate"),h.checkboxGroups&&c("string"==typeof h.checkboxGroups?a.find(h.checkboxGroups):a.find(".checkbox-group").length>0?a.find(".checkbox-group"):a).each(function(){var a=c(this);a.find('input:not([type="button"], [type="submit"], [type="image"]), select, textbox').length==a.find('input[type="checkbox"]').length&&(0==a.find('input[type="checkbox"]:checked').length?(a.addClass("staircase-has-error staircase-highlight-error"),a.data("notify-timeout",setTimeout(function(){a.removeClass("staircase-highlight-error")},h.notifyDelay>300?h.notifyDelay:1e3*h.notifyDelay))):(a.removeClass("staircase-has-error staircase-highlight-error"),a.data("notify-timeout")&&window.clearTimeout(a.data("notify-timeout"))))}),a.is(".staircase-has-error, .awaiting-validation")||a.find(".staircase-has-error, .awaiting-validation").length>0){if(a.is(".awaiting-validation")||a.find(".awaiting-validation").length>0)return f.AwaitSubmit(c(this).attr("disabled",!0)),!1;f.trigger(d.$object.is(".step:last")?"submitfailed":"nextfailed continuefailed",[d,a.find(".staircase-has-error, .awaiting-validation")]),f.scroll(c(".staircase-has-error, .awaiting-validation").first()),b=!0}var e=!0;if(d.$rules.length>0){var g=d.$rules;for(var j in g){var k=g[j],l=[i(f),i(d),window.jQuery];for(var m in k.inputs){var n=c(k.inputs[m]);n.length>1&&(n=n.filter(function(){return"checkbox"!=c(this).attr("type")&&"radio"!=c(this).attr("type")||c(this).is(":checked")?!0:!1})),l.push(n.length>0?n:void 0)}k.callback.apply(k,l)===!1&&(e=!1)}}if(e||(f.trigger(d.$object.is(".step:last")?"submitfailed":"nextfailed continuefailed",[d]),f.scroll(c(".staircase-has-error, .awaiting-validation").first()),b=!0),b)return!1;if(f.Steps.length>d.$index+1)return f.trigger("next continue",[d,f.Steps[d.$index+1]])===!1?!1:(f.Steps[d.$index+1].Focus(),!1);if(!a.closest("form").length&&window.console){console.log("%cStaircase Submit Event:","font-weight: bold; font-size: 1.2em; color: #333;"),console.log("%cYou are seeing this table because no submissible <form> element was found in the DOM.","font-size: .8em;"),console.log(" ");var o=[];c($allinputs).each(function(){o.push({Field:c(this).attr("name"),Value:String(this.value).trim().match(/^-?([0-9]+)(\.([0-9]+))?$/)?parseFloat(this.value):this.value,Type:"object"==typeof this.value?"object":String(this.value).trim().match(/^-?([0-9]+)(\.([0-9]+))$/)?"float":String(this.value).trim().match(/^-?([0-9]+)$/)?"int":"string"})}),window.console.table?console.table(o,["Field","Value","Type"]):console.log(o),f.trigger("debug",[f,d])}if(f.trigger("submit",[f])===!1)return!1}}),h.checkboxGroups&&c("string"==typeof h.checkboxGroups?a.find(h.checkboxGroups):a.find(".checkbox-group").length>0?a.find(".checkbox-group"):a).on("change",'input[type="checkbox"]',function(){c(this).is(":checked")&&c(this).closest(".staircase-has-error").removeClass("staircase-has-error")}),a.find('script[type="staircase/condition"]').each(function(){d.Condition(c(this).html())}).remove(),d};return d.find(h.steps).each(function(){f.Steps.push(new k(this,arguments[0]).Blur(!0))}),f.Steps[0].Focus(!0),window.Staircases[h.ID]=f,f}}();