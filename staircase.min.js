!function(){window.$staircase="5.2.5",String.prototype.trim=function(t){var e,a=this,i=0,r=0;for(a+="",t?(t+="",e=t.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1")):e=" \n\r	\f\x0B            ​\u2028\u2029　",i=a.length,r=0;i>r;r++)if(-1===e.indexOf(a.charAt(r))){a=a.substring(r);break}for(i=a.length,r=i-1;r>=0;r--)if(-1===e.indexOf(a.charAt(r))){a=a.substring(0,r+1);break}return-1===e.indexOf(a.charAt(0))?a:""},String.prototype.hash=function(t){var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<>!:;,.$";t=t?t:8;for(var i=0;t>i;i++)e+=a.charAt(Math.floor(Math.random()*a.length));return e},Number.prototype.toDate=function(t){var e,a,i="Sun Mon Tues Wednes Thurs Fri Satur January February March April May June July August September October November December".split(" "),r=/\\?(.?)/gi,n=function(t,e){return a[t]?a[t]():e},o=function(t,e){for(t=String(t);t.length<e;)t="0"+t;return t};return a={d:function(){return o(a.j(),2)},D:function(){return a.l().slice(0,3)},j:function(){return e.getDate()},l:function(){return i[a.w()]+"day"},N:function(){return a.w()||7},S:function(){var t=a.j(),e=t%10;return 3>=e&&1==parseInt(t%100/10,10)&&(e=0),["st","nd","rd"][e-1]||"th"},w:function(){return e.getDay()},z:function(){var t=new Date(a.Y(),a.n()-1,a.j()),e=new Date(a.Y(),0,1);return Math.round((t-e)/864e5)},W:function(){var t=new Date(a.Y(),a.n()-1,a.j()-a.N()+3),e=new Date(t.getFullYear(),0,4);return o(1+Math.round((t-e)/864e5/7),2)},F:function(){return i[6+a.n()]},m:function(){return o(a.n(),2)},M:function(){return a.F().slice(0,3)},n:function(){return e.getMonth()+1},t:function(){return new Date(a.Y(),a.n(),0).getDate()},L:function(){var t=a.Y();return 0===t%4&0!==t%100|0===t%400},o:function(){var t=a.n(),e=a.W();return a.Y()+(12===t&&9>e?1:1===t&&e>9?-1:0)},Y:function(){return e.getFullYear()},y:function(){return a.Y().toString().slice(-2)},a:function(){return 11<e.getHours()?"pm":"am"},A:function(){return a.a().toUpperCase()},B:function(){var t=3600*e.getUTCHours(),a=60*e.getUTCMinutes(),i=e.getUTCSeconds();return o(Math.floor((t+a+i+3600)/86.4)%1e3,3)},g:function(){return a.G()%12||12},G:function(){return e.getHours()},h:function(){return o(a.g(),2)},H:function(){return o(a.G(),2)},i:function(){return o(e.getMinutes(),2)},s:function(){return o(e.getSeconds(),2)},u:function(){return o(1e3*e.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var t=new Date(a.Y(),0),e=Date.UTC(a.Y(),0),i=new Date(a.Y(),6),r=Date.UTC(a.Y(),6);return t-e!==i-r?1:0},O:function(){var t=e.getTimezoneOffset(),a=Math.abs(t);return(t>0?"-":"+")+o(100*Math.floor(a/60)+a%60,4)},P:function(){var t=a.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-e.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(r,n)},r:function(){return"D, d M Y H:i:s O".replace(r,n)},U:function(){return e/1e3|0}},function(t,a){return e=void 0===a?new Date:a instanceof Date?new Date(a):new Date(1e3*a),t.replace(r,n)}(t,this)};try{window.location.param=function(t,e){if(!e)var e=window.location.search;var a=RegExp("[?&](?:amp;)?"+t.replace(/(\[|\]|\{|\}|\?|\/|\\|\||\(|\))/g,"\\$1")+"=([^&]*)").exec(e);return a&&decodeURIComponent(a[1].replace(/\+/g," "))},Object.defineProperty(window.location,"params",{set:function(){},get:function(){var t={},e=window.location.search.substr(1).split("&");if(e)for(var a in e)e[a]=e[a].replace(/^(?:amp;)?([^=]+)=(.*)?$/,"$1\n$2").split("\n"),t[e[a][0]]?(t[e[a][0]]=[t[e[a][0]]],t[e[a][0]].push(e[a][1])):t[e[a][0]]=e[a][1];return t}})}catch(t){window.console&&console.error("Your browser does not support changes to window.location.",t)}if(window.jQuery.fn.staircase=function(t){var e=window.jQuery;if(1==e(this).length){var a=e(this).data("staircase");return a||e(this).data("staircase",a=new Staircase(this,t?t:{})),a}return e(this).each(function(){e(this).data("staircase")||e(this).data("staircase",new Staircase(this,t?t:{}))})},window.jQuery("input[staircase-value]").each(function(){var t=window.jQuery,e=t(this).attr("staircase-value").replace(/#{(.*?)}/g,function(t,e){if(e.match(/^date\.(.*)$/i))return(new Date/1e3).toDate(e.replace(/^date\.(.*)$/i,"$1"));if(e.match(/^cookies?\.(.*)$/i)){var a=e.replace(/^cookies?\.(.*)$/i,"$1"),i=document.cookie.split("; ");for(var r in i)if(i[r].split("=")[0]==a)return i[r].substr(a.length+1);return""}var n=window;e=e.split(".");for(var r in e){if(!n[e[r]])return;n=n[e[r]]}return n!=window?n:void 0});t(this).removeAttr("staircase-value").val(e)}),!document.title||document.title.match(/\.(html?|php)((\?|#)(.*?)?)?$/i)||0==$("title").length){var e=($("h1, h2, h3, h4, h5, h6").first().text()||"").trim();if(e||(e=($("img[alt]").first().attr("alt")||"").trim()),e||(e=($("p").first().text().trim()||"").split(" ").slice(0,4).join(" ").trim()),!e&&window.location.href.match(/\.(html?|php)((\?|#)(.*?)?)?$/i)){e=window.location.href.replace(/(.*)\/(.*?)\.(html?|php)((\?|#)(.*?)?)?$/i,"$2").replace(/[-_\.]/g," ").split(" ");for(var a in e)e[a]=e[a][0].toUpperCase()+e[a].substr(1).toLowerCase();e=e.join(" ")}document.title=e}window.Data8API=function(t,e){var a=this,i=!1;a.APIKey=t,a.License=e,a.Cache={},a.DefaultCountry="GB",a.Verify=function(t,e,i){if(!i&&e&&"function"==typeof e&&(i=e,e="email"),!i||"function"!=typeof i)return a;if(a.Cache[e]&&a.Cache[e][t])return("loading"!==a.Cache[e][t]||"object"==typeof a.Cache[e][t]&&!a.Cache[e][t].TimedOut)&&i.call(a.Cache[e][t],a.Cache[e][t].IsValid,a.Cache[e][t]),a;for(var r in window.Staircases)window.Staircases[r].trigger("data8",[a,window.Staircases[r],null]);var n=function(r,n){a.Cache[e][t]=r,a.Cache[e][t].RequestDuration=(1*new Date-o)/1e3,a.Cache[e][t].IsValid=!!n,i.call(a.Cache[e][t],a.Cache[e][t].IsValid,a.Cache[e][t])},o=1*new Date,s=setTimeout(function(){a.Cache[e][t]={IsValid:!0,RequestDuration:(1*new Date-o)/1e3,TimedOut:!0},n.call(a.Cache[e][t],a.Cache[e][t].IsValid,a.Cache[e][t])},5e3);switch(a.Cache[e]||(a.Cache[e]={}),a.Cache[e][t]="loading",String(e).trim().toLowerCase()){case"email":var c=new data8.emailvalidation;c.isvalid(t,"Address",null,function(t){clearTimeout(s),n.call(this,t,t.Result.trim().match(/^(catchall|error|greylisted|inconclusive|valid)$/i))});break;case"mobile":case"landline":case"telephone":case"phone":t=t.replace(/[^0-9\+]/g,"");var c=new data8.internationaltelephonevalidation;c.isvalid(t,a.DefaultCountry,[new data8.option("UseMobileValidation","true"),new data8.option("UseLineValidation","true")],function(t){clearTimeout(s),n.call(this,t,t.Result.ValidationResult.trim().match(/^(nocoverage|valid)$/i))});break;default:clearTimeout(s),a.Cache[e][t]=void 0}return a},a.Lookup=function(t,e){if(!e||"function"!=typeof e)return a;var i=t.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();if(a.Cache.Addresses&&a.Cache.Addresses[i])return"loading"!==a.Cache.Addresses[i]&&e.call(a,a.Cache.Addresses[i],t),a;for(var r in window.Staircases)window.Staircases[r].trigger("data8lookup",[a,window.Staircases[r],t,null]);var n=function(r,n){a.Cache.Addresses[i]=r,a.Cache.Addresses[i].RequestDuration=(1*new Date-o)/1e3,a.Cache.Addresses[i].IsValid=!!n,e.call(a,a.Cache.Addresses[i],t,a.Cache.Addresses[i])},o=1*new Date,s=setTimeout(function(){a.Cache.Addresses[i]={IsValid:!0,RequestDuration:(1*new Date-o)/1e3,TimedOut:!0},n.call(a.Cache.Addresses[i],a.Cache.Addresses[i].IsValid,a.Cache.Addresses[i])},5e3);a.Cache.Addresses||(a.Cache.Addresses={}),a.Cache.Addresses[i]="loading";var c=new data8.addresscapture;return c.getfulladdress(a.License,t,"",[new data8.option("MaxLines","5"),new data8.option("FixTownCounty","true")],function(t){clearTimeout(s),n.call(this,t,t.Results.length>0)}),a},a.Authenticate=function(t){if(!t||"function"!=typeof t)return a;var e=function(){window.data8&&window.data8.addresscapture&&window.data8.emailvalidation&&window.data8.internationaltelephonevalidation?t.call(a):setTimeout(e,50)};if(i||$('script[src*="data-8.co.uk"]').lenght>0)return e(),a;i=!0;var r=$(document.createElement("script")).appendTo("head")[0];return r.onload=function(){data8.load("AddressCapture"),data8.load("EmailValidation"),data8.load("InternationalTelephoneValidation"),e()},r.src="http://webservices.data-8.co.uk/javascript/loader.ashx?key="+a.APIKey,a}},window.BriteVerify=function(t){var e=this;return e.APIKey=t,e.Cache={},e.Verify=function(t,a,i){if(t&&"string"==typeof t&&a&&"function"==typeof a){if(e.Cache[t])return"loading"!=e.Cache[t]&&a.call(window,e.Cache[t].status,e.Cache[t]),e;e.Cache[t]="loading";var r=function(r){r&&"object"==typeof r&&!r.errors?(e.Cache[t]=r,a.call(window,r.status,r)):i&&"function"==typeof i&&(e.Cache[t]=null,i.call(window))},n=1*new Date,o=setTimeout(function(){e.Cache[t]={status:"timeout",RequestDuration:(1*new Date-n)/1e3,TimedOut:!0},r.call(window,e.Cache[t].status,e.Cache[t])},5e3);$.ajax({data:{address:t,apikey:e.APIKey},dataType:"json",success:function(t){clearTimeout(o),t.RequestDuration=(1*new Date-n)/1e3,r.call(this,t)},type:"get",url:"http://staircase.virtuosoadvertising.co.uk/proxy/briteverify.php"})}return e},e},window.Staircases={},window.Staircase=function(t,e){var a=window.jQuery,i=a(t),r={},n=this,o=0,s={checkboxGroups:!1,history:!1,ID:"".hash(8),notifyDelay:3,steps:".step",stepBlur:null,stepFocus:null,validate:null,APIs:{briteverify:{APIKey:null,fields:'[validate="email"]',markInput:!1,scoreFieldName:null,scoreFieldSuffix:"_bvscore",logging:!1},data8:{APIKey:null,logging:!1}}},c=function(t){return t},u=function(t,e){for(var a in e)t[a]&&"object"==typeof t[a]&&"object"==typeof e[a]?t[a]=u(t[a],e[a]):t[a]=e[a];return t};e&&"object"==typeof e&&(s=u(s,e)),n.log=function(t){return a.ajax({type:"post",url:"http://staircase.virtuosoadvertising.co.uk/edge/log.php",data:{url:window.location.hostname,data:t}}),n},n.scroll=function(t,e){if(t=a(t),e=a(e?e:document.body),0==t.length||0==e.length)return n;if(jQuery.fn.scrollTo)e.scrollTo(t,500);else if(t[0].scrollIntoView){try{t[0].scrollIntoView({behavior:"smooth",block:"start"})}catch(i){t[0].scrollIntoView()}e[0].scrollTop-=20}else{var r=t.offset();r&&e.scrollTop(r.top-20)}return n},n.on=function(t,e){if(t.trim().indexOf(" ")>-1){t=t.trim().split(" ");for(var a in t)n.on(t[a],e);return n}return t=t.trim(),r[t]||(r[t]=[]),r[t].push(e),n},n.off=function(t,e){if(t.trim().indexOf(" ")>-1){t=t.trim().split(" ");for(var a in t)n.off(t[a],e);return n}if(t=t.trim(),r[t]&&r[t].length>0){if($newevents=[],e!==undeefined)for(var a in r[t])r[t][a]!=e&&$newevents.push(r[t][a]);r[t]=$newevents}return n},n.trigger=function(t,e){if(t.trim().indexOf(" ")>-1){t=t.trim().split(" ");for(var a in t)n.trigger(t[a],e);return n}if(t=t.trim(),r[t]&&r[t].length>0)for(var a in r[t])if(r[t][a].apply(n,e?e:[])===!1)return!1;return n},n.Patterns={currency:/^(-)?([^a-zA-Z0-9 ])?([0-9\,]+)(\.([0-9]{2,}))?$/,date:[/^([0-9]{1,2})(\/|-|\.|,| )([0-9]{1,2})(\/|-|\.|,| )([0-9]{2,4})$/,/^((mon|monday|tue|tues|tuesday|wed|wednesday|thu|thurs|thursday|fri|friday|sat|saturday|sun|sunday)([\s]+))?([0-9]{1,2})(st|nd|rd|th)?([\s]+)?(jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|sept|september|oct|october|nov|november|dec|december)([\s]+)?([0-9]{2,4})$/i,/^([0-9]{2})$/,/^(1|2)([0-9]{3})$/],datepicker:/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/,"default":/^(?!\s*$).+/,email:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,filename:/^(([^\/\\\?%\*:|"<>]+)?\.([^\/\\\?%\*:|"<>\.]+)|([^\/\\\?%\*:|"<>\.]+))$/,name:/^([ A-Za-z\.\-']+)$/,number:[/^-?([0-9]+)$/,/^-?([0-9]+)\.([0-9]+)$/,/^([0-9]+)$/,/^([0-9]+)\.([0-9]+)$/,/^-?([0-9]+)(\.([0-9]+))?$/],phone:[function(){return this.replace(/\s/g,"").match(/^0(?!.*(\d)\1{9,})\d{9,}$/)},function(){return this.replace(/\s/g,"").match(/^07(?!.*(\d)\1{9,})\d{9,}$/)},function(){return this.replace(/\s/g,"").match(/^0(?!.*(\d)\1{9,})\d{9,}$/)},/^0(?!.*(\d)\1{9,})\d{9,}$/,/^07(?!.*(\d)\1{9,})\d{9,}$/,/^0(?!.*(\d)\1{9,})\d{9,}$/],postcode:/^(([gG][iI][rR] {0,}0[aA]{2})|((([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y]?[0-9][0-9]?)|(([a-pr-uwyzA-PR-UWYZ][0-9][a-hjkstuwA-HJKSTUW])|([a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y][0-9][abehmnprv-yABEHMNPRV-Y]))) {0,}[0-9][abd-hjlnp-uw-zABD-HJLNP-UW-Z]{2}))$/,time:/^([0-9]{1,2}):([0-9]{2})(:([0-9]{2}))?([\s]+)?(am|pm)?$/i,zipcode:/^(^\d{5}$)|(^\d{5}-\d{4}$)$/},n.Patterns.mobile=n.Patterns.phone[1],n.Patterns.landline=n.Patterns.telephone=n.Patterns.phone,n.Constraints={letters:/^([^0-9])$/,numbers:/^([^a-zA-Z])$/,symbols:/^([^0-9a-zA-Z])$/},n.$object=i,n.$current=0,n.Steps=[],a(window).on("hashchange popstate",function(){var t=/^#!\/([A-Z0-9<>\!\:\;\,\.\$]{8})\/([0-9]+)$/i;if(window.location.hash.match(/^#!?\/?$/))for(var e in window.Staircases){if(window.Staircases[e].trigger("hashchange popstate",[window.Staircases[n.$current],window.location.hash])===!1)return!1;window.Staircases[e].Steps[0].Focus()}else if(window.location.hash.match(t)){var i=window.location.hash.replace(t,"$1"),r=parseInt(window.location.hash.replace(t,"$2"));if(window.Staircases[i]&&window.Staircases[i].Steps[r]&&window.Staircases[i].Steps[r].Visited){if(window.Staircases[i].trigger("hashchange popstate",[i,r])===!1)return!1;window.Staircases[i].Steps[r].Focus()}}a(window).scrollTop(o)}),n.Extend=function(t,e){return n.Patterns[t]=e,n},n.Validate=function(t,e){if(!t)return!1;if(t=a(t),e||(e=t.attr("validate")),e){if(n.trigger("beforevalidate",[t])===!1)return!1;if(("select"==e||"selected"==e)&&t.is("select")){var i=t.val(),r=t.find("option").first(),o=void 0===r.attr("value")?r.html():r.attr("value");if("object"==typeof i)for(var c in i)if(i[c]==o)return!1;return i==o?n.trigger("aftervalidate validate",[t,!1])===!0:n.trigger("aftervalidate validate",[t,!0])!==!1}if(!("checked"!=e&&"unchecked"!=e||"checkbox"!=t.attr("type")&&"radio"!=t.attr("type"))){var u=!("checked"==e&&!t.is(":checked")||"unchecked"==e&&t.is(":checked")),l=n.trigger("aftervalidate validate",[t,u]);return l===!0||l===!1?l:u}var d=n.Patterns,f=e.indexOf("[")>-1?e.replace(/\[([0-9]+)\]/g,"\n$1").split("\n"):[e];if(d){if(f.length>1)for(var c=0;c<f.length&&d[f[c]];c++)d=d[f[c]];else d="object"!=typeof d[f[0]]||d[f[0]]instanceof RegExp?d[f[0]]:d[f[0]][0];if(d&&(d instanceof RegExp||"function"==typeof d)){var u=!1;d instanceof RegExp?u=!!t[0].value.match(d):"function"==typeof d&&(u=!!d.call(t[0].value));var l=n.trigger("aftervalidate validate",[t,u]);return l===!0||l===!1?l:u}}}if(s.validate&&"function"==typeof s.validate){var u=!!s.validate.call(t[0],n);return n.trigger("aftervalidate validate",[t,u]),u}return!1},n.To=function(t){return n.trigger("switch",[t]),t<n.$current?n.Steps[t].Focus():n.Steps[t]&&n.Steps[n.$current].Validate()&&n.Steps[t].Focus(),n},n.Next=function(){return n.trigger("switch next",[n.$current+1]),n.Steps[n.$current+1]&&n.Steps[n.$current].Validate()&&n.Steps[n.$current+1].Focus(),n},n.Prev=function(){return n.trigger("switch prev previous",[n.$current-1]),n.Steps[n.$current-1]&&n.Steps[n.$current-1].Focus(),n},n.AwaitSubmit=function(t){var e=function(){return a(".awaiting-validation",i).length>0?(setTimeout(e,100),!1):void t.removeAttr("disabled").click()};return e(),n};var l=function(){var t=a(arguments[0]),i=this,r=null;return $toconstrain='input:not([type="button"], [type="submit"], [type="image"])[constrain], textarea[constrain]',$allinputs='input:not([type="button"], [type="submit"], [type="image"])[name], select[name], textarea[name]',$inputs='input:not([type="button"], [type="submit"], [type="image"])[validate], select[validate], textarea[validate]',$buttons='input[type="button"].next, input[type="button"].continue, input[type="button"].submit, input[type="submit"], button',$backbuttons='input[type="button"].prev, input[type="submit"].prev, button.prev, input[type="button"].back, input[type="submit"].back, button.back',i.$index=arguments[1],i.$object=t,i.$rules=[],Object.defineProperty(t,"Visited",{get:function(){return r},set:function(){r=arguments[0]?arguments[0]:!0}}),i.Focus=function(e){for(var r in n.Steps)n.Steps[r].Blur(e);if(!t.is(":visible")){n.$current=i.$index,t.Visited||(t.Visited=new Date),e||t.trigger("focus"),t.show();var c="!/"+s.ID+"/"+i.$index;o=a(window).scrollTop(),i.$index>0&&window.location.hash!="#"+c?location.hash=c:0==i.$index&&(location.hash="!/"),n.trigger("stepfocus",[i])}return i},i.Blur=function(e){return t.is(":visible")&&(e||t.trigger("blur"),t.hide(),n.trigger("stepblur",[i])),i},i.Validate=function(e,r){if(!e){var o=!0;return t.find($inputs).each(function(){a(this).attr("optional")?a(this).val()&&!i.Validate(this)&&(o=!1):i.Validate(this)||(o=!1)}),o}if(e=a(e),n.trigger("beforestepvalidate",[i,e])===!1)return!1;var c=void 0!==r?!!r:e.attr("optional")?!e.val()||!!n.Validate(e):!!n.Validate(e),u=e.closest("label").length?e.closest("label"):e.attr("id")&&a('label[for="'+e.attr("id")+'"]').length?a('label[for="'+e.attr("id")+'"]'):!1,l=a(u?u.add(e):e);return l.removeClass("staircase-has-error staircase-highlight-error"),c?(l.data("notify-timeout")&&window.clearTimeout(l.data("notify-timeout")),n.trigger("stepvalidate",[i,!0]),!0):(l.addClass("staircase-has-error staircase-highlight-error"),l.data("notify-timeout",setTimeout(function(){l.removeClass("staircase-highlight-error")},s.notifyDelay>300?s.notifyDelay:1e3*s.notifyDelay)),n.trigger("stepvalidate",[i,!1]),!1)},i.Condition=function(e){if("function"!=typeof e&&"string"!=typeof e)return i;var r=["Staircase","Step","$"],o={};return t.find('input:not([type="button"], [type="submit"], [type="image"])[name], textarea[name], select[name]').each(function(){var t=a(this).attr("name");o[t]?(void 0===o[t].length&&(o[t]=[o[t]]),o[t].push(this)):(r.push(t),o[t]=this)}),n.trigger("addcondition",[i,i.$rules.push({callback:"function"==typeof e?e:new Function(r,e),inputs:o})-1]),i},t.on("keydown",$toconstrain,function(t){var e=a(this),i=e.attr("constrain");return i=n.Constraints[i]?n.Constraints[i]:null,i&&!String.fromCharCode(t.keyCode>=96&&t.keyCode<=105?t.keyCode-48:t.keyCode).match(i)?(n.trigger("constrained",[e,i]),!1):void 0}),t.on("focus blur keyup keydown change paint",$inputs,function(t){var e=a(this),i=e.closest("label");switch(i=0==i.length&&e.attr("name")?a('label[for="'+e.attr("name")+'"]'):i,i=i.length>0?i.add(e):e,t.type){case"focusin":i.addClass("focus");break;case"focusout":i.removeClass("focus");break;default:i[e.val().trim()?"removeClass":"addClass"]("empty")}}),a($inputs).trigger("paint"),t.on("change validate",$inputs,function(){var t=a(this),r=t.closest("label"),o=a(r?r.add(t):t);if(s.APIs.briteverify.APIKey&&t.filter(function(){var e=s.APIs.briteverify.fields,a=!1;"string"==typeof e&&(e=e.indexOf(",")>-1?e.split(", "):[e]),e.push("*[bv-score]");for(var i in e)e[i].trim()&&(a=a?!0:t.is(e[i].trim()));return a}).length&&n.Validate(t[0],"email")){if(n.trigger("beforebriteverify",[t])===!1)return!1;var c=t.attr("bv-score")?t.attr("bv-score"):s.APIs.briteverify.scoreFieldName?s.APIs.briteverify.scoreFieldName:t.attr("name")+(s.APIs.briteverify.scoreFieldSuffix||"_score"),u=a('input[name="'+c+'"]').length>0?a('input[name="'+c+'"]'):t.data("briteverify-scorefield");u||(u=a('<input type="hidden" tabindex="-1" name="'+c+'" />').insertAfter(t).on("focus",function(){t.focus()})),t.data("briteverify-scorefield",u),o.addClass("awaiting-validation"),n.BriteVerify||(n.BriteVerify=new BriteVerify(s.APIs.briteverify.APIKey)),n.BriteVerify.Verify(t[0].value,function(a,r){s.APIs.briteverify.markInput&&("invalid"!=a.trim().toLowerCase()?(o.removeClass("staircase-has-error staircase-highlight-error"),i.Validate(t[0],!0)):(o.addClass("staircase-has-error staircase-highlight-error"),t.data("notify-timeout",setTimeout(function(){o.removeClass("staircase-highlight-error")},s.notifyDelay>300?s.notifyDelay:1e3*s.notifyDelay)),i.Validate(t[0],!1))),o.removeClass("awaiting-validation"),e.APIs.briteverify.logging&&n.log({result:r,value:t.val()}),n.trigger("briteverify",[t,a,r]),u.val(a)})}if((t.attr("d8")||t.attr("d8-lookup-street"))&&t[0].value&&s.APIs.data8&&s.APIs.data8.APIKey){if(t.attr("d8")){if(i.Validate(t[0])){if(o.addClass("awaiting-validation"),n.trigger("beforedata8",[t])===!1)return o.removeClass("awaiting-validation"),!1;n.Data8||(n.Data8=new Data8API(s.APIs.data8.APIKey,s.APIs.data8.License)),n.Data8.Authenticate(function(){n.Data8.Verify(t.val().trim(),t.attr("d8"),function(a,r){o.removeClass("awaiting-validation"),"object"==typeof this&&void 0===this.IsValid||(a?(o.removeClass("staircase-has-error staircase-highlight-error"),i.Validate(t[0],!0)):(o.addClass("staircase-has-error staircase-highlight-error"),t.data("notify-timeout",setTimeout(function(){o.removeClass("staircase-highlight-error")},s.notifyDelay>300?s.notifyDelay:1e3*s.notifyDelay)),i.Validate(t[0],!1)),e.APIs.data8.logging&&n.log({response:r,type:t.attr("d8"),value:t.val()}),n.trigger("data8",[t,a,r]))})})}}else if(t.attr("d8-lookup-street")){var l=t.data("d8-postcode-validated-successfully");if(!l||l!=t.val().replace(/[^a-zA-Z0-9]/g,"").toUpperCase()){var d=a('*[name="'+t.attr("d8-lookup-street").toLowerCase().trim()+'"]'),f=t.attr("d8-lookup-city")||"";if(f&&(f=a('*[name="'+f.toLowerCase().trim()+'"]'),0==f.length&&(f=a('<input type="hidden" name="'+t.attr("d8-lookup-city")+'" />').insertAfter(d),n.trigger("data8lookupcityappended",[f]))),i.Validate(t[0])){if(o.addClass("awaiting-validation"),n.trigger("beforedata8lookup",[t,d])===!1)return o.removeClass("awaiting-validation"),!1;n.Data8||(n.Data8=new Data8API(s.APIs.data8.APIKey,s.APIs.data8.License)),n.Data8.Authenticate(function(){n.Data8.Lookup(t[0].value,function(r,s,c){if(s=s.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),o.removeClass("awaiting-validation"),!r.IsValid)return i.Validate(t[0],!1),!1;t.data("d8-postcode-validated-successfully",t.val().replace(/[^a-zA-Z0-9]/g,"").toUpperCase()),i.Validate(t[0],!0);var u=["class","id","name","style"];d.each(function(){var t=a(this),e=t;if(!t.data("current-postcode")||t.data("current-postcode")!=s){if(!t.is("select")){e=a('<select validate="selected"></select>').on("change",function(){if("N/A"==this.value)d.each(function(){var t=a(this).data("select-counterpart");a(this).insertAfter(t),t.remove()}).first().focus();else{var t=a(this).find('option[value="'+this.value+'"]');f&&f.val(t.attr("city"))}});for(var i in u)t.is("["+u[i]+"]")&&e.attr(u[i],t.attr(u[i]));e.insertAfter(t).data("original",t),t.data("select-counterpart",e).detach()}e.data("current-postcode",s).html('<option value="">Please Select Your Address...</option>');for(var i in r.Results){for(var n=[],o=[],c=0;c<r.Results[i].Address.Lines.length-1;c++){var l=r.Results[i].Address.Lines[c];l&&n.push(l),o.push(l)}n=n.join(", "),e.append('<option value="'+n+'" city="'+o[3]+'">'+n+"</option>")}e.append('<option value="N/A">My address is not listed here</option>')}}),e.APIs.data8.logging&&n.log({response:c,type:"address",value:t.val()}),n.trigger("data8lookup",[t,d,r])})})}}}}else i.Validate(t[0])}),t.on("click",$backbuttons,function(){return a(this).is($buttons)?void 0:n.trigger("back",[i,a(this)])===!1?!1:(i.$index>0&&n.Steps[i.$index-1].Focus(),!1)}),t.on("click",$buttons,function(){if(!a(this).is($backbuttons)){var e=!1;if(n.trigger("beforesubmit",[i,a(this)])===!1)return!1;if(t.find($inputs).trigger("validate"),s.checkboxGroups&&a("string"==typeof s.checkboxGroups?t.find(s.checkboxGroups):t.find(".checkbox-group").length>0?t.find(".checkbox-group"):t).each(function(){var t=a(this);t.find('input:not([type="button"], [type="submit"], [type="image"]), select, textbox').length==t.find('input[type="checkbox"]').length&&(0==t.find('input[type="checkbox"]:checked').length?(t.addClass("staircase-has-error staircase-highlight-error"),t.data("notify-timeout",setTimeout(function(){t.removeClass("staircase-highlight-error")},s.notifyDelay>300?s.notifyDelay:1e3*s.notifyDelay))):(t.removeClass("staircase-has-error staircase-highlight-error"),t.data("notify-timeout")&&window.clearTimeout(t.data("notify-timeout"))))}),t.is(".staircase-has-error, .awaiting-validation")||t.find(".staircase-has-error, .awaiting-validation").length>0){if(t.is(".awaiting-validation")||t.find(".awaiting-validation").length>0)return n.AwaitSubmit(a(this).attr("disabled",!0)),!1;n.trigger(i.$object.is(".step:last")?"submitfailed":"nextfailed continuefailed",[i,t.find(".staircase-has-error, .awaiting-validation")]),n.scroll(a(".staircase-has-error, .awaiting-validation").first()),e=!0}var r=!0;if(i.$rules.length>0){var o=i.$rules;for(var u in o){var l=o[u],d=[c(n),c(i),window.jQuery];for(var f in l.inputs){var h=a(l.inputs[f]);h.length>1&&(h=h.filter(function(){return!!("checkbox"!=a(this).attr("type")&&"radio"!=a(this).attr("type")||a(this).is(":checked"))})),d.push(h.length>0?h:void 0)}l.callback.apply(l,d)===!1&&(r=!1)}}if(r||(n.trigger(i.$object.is(".step:last")?"submitfailed":"nextfailed continuefailed",[i]),n.scroll(a(".staircase-has-error, .awaiting-validation").first()),e=!0),e)return!1;if(n.Steps.length>i.$index+1)return n.trigger("next continue",[i,n.Steps[i.$index+1]])===!1?!1:(n.Steps[i.$index+1].Focus(),!1);if(!t.closest("form").length&&window.console){console.log("%cStaircase Submit Event:","font-weight: bold; font-size: 1.2em; color: #333;"),console.log("%cYou are seeing this table because no submissible <form> element was found in the DOM.","font-size: .8em;"),console.log(" ");var p=[];a($allinputs).each(function(){p.push({Field:a(this).attr("name"),Value:String(this.value).trim().match(/^-?([0-9]+)(\.([0-9]+))?$/)?parseFloat(this.value):this.value,Type:"object"==typeof this.value?"object":String(this.value).trim().match(/^-?([0-9]+)(\.([0-9]+))$/)?"float":String(this.value).trim().match(/^-?([0-9]+)$/)?"int":"string"})}),window.console.table?console.table(p,["Field","Value","Type"]):console.log(p),n.trigger("debug",[n,i])}if(n.trigger("submit",[n])===!1)return!1}}),s.checkboxGroups&&a("string"==typeof s.checkboxGroups?t.find(s.checkboxGroups):t.find(".checkbox-group").length>0?t.find(".checkbox-group"):t).on("change",'input[type="checkbox"]',function(){a(this).is(":checked")&&a(this).closest(".staircase-has-error").removeClass("staircase-has-error")}),t.find('script[type="staircase/condition"]').each(function(){i.Condition(a(this).html())}).remove(),i};return i.find(s.steps).each(function(){n.Steps.push(new l(this,arguments[0]).Blur(!0))}),n.Steps[0].Focus(!0),window.Staircases[s.ID]=n,n}}();